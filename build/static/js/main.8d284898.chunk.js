(this["webpackJsonpreact-app-book_dinner"]=this["webpackJsonpreact-app-book_dinner"]||[]).push([[0],{102:function(e,t){!function(e){var t='<svg><symbol id="icon-check-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m193.5 301.7l-210.6 292c-12.7 17.7-39 17.7-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"  ></path></symbol><symbol id="icon-close-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m165.4 618.2l-66-0.3L512 563.4l-99.3 118.4-66.1 0.3c-4.4 0-8-3.5-8-8 0-1.9 0.7-3.7 1.9-5.2l130.1-155L340.5 359c-1.2-1.5-1.9-3.3-1.9-5.2 0-4.4 3.6-8 8-8l66.1 0.3L512 464.6l99.3-118.4 66-0.3c4.4 0 8 3.5 8 8 0 1.9-0.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"  ></path></symbol></svg>',a=function(){var e=document.getElementsByTagName("script");return e[e.length-1]}().getAttribute("data-injectcss"),n=function(e,t){t.firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(e,t.firstChild):t.appendChild(e)};if(a&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(r){console&&console.log(r)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()}),!1)}else document.attachEvent&&function(e,t){var a=e.document,n=!1,c=function(){n||(n=!0,t())};(function e(){try{a.documentElement.doScroll("left")}catch(r){return void setTimeout(e,50)}c()})(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,c())}}(e,t)}((function(){var e,a;(e=document.createElement("div")).innerHTML=t,t=null,(a=e.getElementsByTagName("svg")[0])&&(a.setAttribute("aria-hidden","true"),a.style.position="absolute",a.style.width=0,a.style.height=0,a.style.overflow="hidden",n(a,document.body))}))}(window)},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),o=(a(66),a(1)),l=a(2),i=a.n(l),u=a(6),m=a(3),d=(a(72),a(28)),p=a(7),f=a(8),h=a(10),E=a(9),b=a(11),v=a(16),O=a.n(v);function y(e){var t=window.localStorage.getItem(e);return JSON.parse(t)}function g(e,t){t=JSON.stringify(t),window.localStorage.setItem(e,t)}function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){return O.a.get("/store/detail/".concat(e))}function w(){return O.a.get("/validate/token")}function k(e){return O.a.get("/order/".concat(e))}function C(e){return O.a.post("/address/add",{data:e})}function S(e){return O.a.get("/address/".concat(e))}function P(e){var t=e.data,a=e.id;return O.a.post("/user/avatar/?id=".concat(a),t,{headers:{"Content-Type":"multipart/form-data"}})}function D(e){return O.a.get("/user/avatar/".concat(e))}O.a.defaults.baseURL="http://127.0.0.1:8080/api/public/v1",O.a.interceptors.request.use((function(e){return e.headers.Authorization="".concat(y("token")),e}),(function(e){return Promise.reject(e)}));var x=a(5);function L(e){for(var t,a=e.rate,n=Math.floor(a),c=a-n,s=Math.floor(5-a),o=[],l=[],i=[],u=0;u<n;u++)o.push(r.a.createElement("i",{className:"iconfont icon-pingfen",style:{color:"#FFCB00"},key:""+u+n}));c>.5&&l.push(r.a.createElement("i",{className:"iconfont icon-xing",style:{color:"#FFCB00"},key:""+c}));for(var m=0;m<s;m++)i.push(r.a.createElement("i",{className:"iconfont icon-pingfen",style:{color:"#eee"},key:m}));return t=[].concat(o,l,i),r.a.createElement("div",{className:"star_wrapper"},t)}var A=function(e){return r.a.createElement("nav",{className:"tab_bar_container"},r.a.createElement(x.c,{exact:!0,to:"/",className:"tab_item",isActive:function(e,t){return"/"===t.pathname},activeClassName:"selected"},r.a.createElement("i",{className:"iconfont icon-fan"}),r.a.createElement("span",null,"\u9996\u9875")),r.a.createElement(x.c,{to:"/order",className:"tab_item",isActive:function(e,t){return"/order"===t.pathname},activeClassName:"selected"},r.a.createElement("i",{className:"iconfont icon-icon-"}),r.a.createElement("span",null,"\u8ba2\u5355")),r.a.createElement(x.c,{to:"/user",className:"tab_item",isActive:function(e,t){return"/user"===t.pathname},activeClassName:"selected"},r.a.createElement("i",{className:"iconfont icon-wode"}),r.a.createElement("span",null,"\u6211\u7684")))};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var I=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).state={storeList:[],currentAddr:""},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.userInfo.id,e.next=3,O.a.get("/stores");case 3:a=e.sent,n=y("address"),r="",n[t]&&(r=n[t].address),this.setState({storeList:a.data.data,currentAddr:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddress",value:function(){var e=this.props,t=e.isLogin,a=e.history,n=e.location;return t?a.push({pathname:"/user/address/select",state:{from:n.pathname}}):a.push({pathname:"/user/login",state:{from:n.pathname}})}},{key:"render",value:function(){var e=this.state.storeList;return r.a.createElement("div",{className:"home_container"},r.a.createElement("header",{className:"home_header"},r.a.createElement("div",{className:"header_address",onClick:this.handleAddress.bind(this)},r.a.createElement("i",{className:"iconfont icon-zuobiao"}),r.a.createElement("span",{className:"address_name"},this.state.currentAddr||"\u6dfb\u52a0\u5730\u5740"),r.a.createElement("i",{className:"icon_trig"})),r.a.createElement(x.b,{to:"/search",className:"search_input"},r.a.createElement("div",{className:"ipt"},r.a.createElement("i",{className:"iconfont icon-sousuo"}),r.a.createElement("span",null,"\u641c\u7d22\u9644\u8fd1\u5546\u5bb6\u3001\u5546\u54c1\u540d\u79f0")))),r.a.createElement("section",{className:"recommended_merchants"},r.a.createElement("span",{className:"split"},"\u2014\u2014"),r.a.createElement("span",{className:"title"},"\u63a8\u8350\u5546\u5bb6"),r.a.createElement("span",{className:"split"},"\u2014\u2014")),r.a.createElement("section",{className:"merchants"},r.a.createElement("ul",{className:"merchant_list"},e.map((function(e){return r.a.createElement("li",{className:"merchant_item",key:e._id},r.a.createElement(x.b,{to:"/shop/".concat(e._id),className:"merchant_detail"},r.a.createElement("div",{className:"left_logo"},r.a.createElement("img",{src:e.store_logo_url})),r.a.createElement("div",{className:"text_detail"},r.a.createElement("div",{className:"name"},r.a.createElement("h2",null,e.store_name),r.a.createElement("span",null,"...")),r.a.createElement("div",{className:"rate_num"},r.a.createElement("div",{className:"stars"},r.a.createElement(L,{rate:e.store_grade}),r.a.createElement("span",null,e.store_grade)),r.a.createElement("p",null,"\u5546\u5bb6\u914d\u9001")),r.a.createElement("div",{className:"dispatch"},r.a.createElement("div",null,r.a.createElement("span",null,"\uffe5",e.startup_cost,"\u8d77\u9001"),r.a.createElement("span",{className:"split"},"|"),r.a.createElement("span",null,e.distribution_cost?"\u914d\u9001\u8d39\uffe5".concat(e.distribution_cost):"\u514d\u914d\u9001\u8d39")),r.a.createElement("div",null,r.a.createElement("span",null,"718m"),r.a.createElement("span",{className:"split"},"|"),"30\u5206\u949f",r.a.createElement("span",null))))),r.a.createElement("div",{className:"coupon_detail"}))})))),r.a.createElement(A,null))}}]),t}(n.Component),R=Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.user)}))(I),B=a(111),z=a(26),M=a(31),U=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.content;return r.a.createElement("div",{className:"toast-notice ".concat(t)},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#".concat({info:"icon-info-circle-fill",success:"icon-check-circle-fill",warning:"icon-warning-circle-fill",error:"icon-close-circle-fill",loading:"icon-loading"}[t])})),r.a.createElement("span",null,a))}}]),t}(n.Component),G=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(E.a)(t).call(this))).transitionTime=300,e.state={notices:[]},e.removeNotice=e.removeNotice.bind(Object(z.a)(e)),e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"getNoticeKey",value:function(){var e=this.state.notices;return"notice-".concat((new Date).getTime(),"-").concat(e.length)}},{key:"addNotice",value:function(e){var t=this,a=this.state.notices;return e.key=this.getNoticeKey(),a.every((function(t){return t.key!==e.key}))&&(e.length>0&&"loading"===a[e.length-1].type?(a.push(e),setTimeout((function(){t.setState({notices:a})}),this.transitionTime)):(a.push(e),this.setState({notices:a})),e.duration>0&&setTimeout((function(){t.removeNotice(e.key)}),e.duration)),function(){t.removeNotice(e.key)}}},{key:"removeNotice",value:function(e){var t=this,a=this.state.notices;this.setState({notices:a.filter((function(a){return a.key!==e||(a.onClose&&setTimeout(a.onClose,t.transitionTime),!1)}))})}},{key:"render",value:function(){var e=this,t=this.state.notices;return r.a.createElement(M.TransitionGroup,{className:"toast-notification"},t.map((function(t){return r.a.createElement(M.CSSTransition,{key:t.key,classNames:"toast-notice-wrapper notice",timeout:e.transitionTime},r.a.createElement(U,t))})))}}]),t}(n.Component);var F,H,V=function(){var e=document.createElement("div");document.body.appendChild(e);var t=r.a.createRef();return s.a.render(r.a.createElement(G,{ref:t}),e),{addNotice:function(e){return t.current.addNotice(e)},destroy:function(){s.a.unmountComponentAtNode(e),document.body.removeChild(e)}}}(),J=(a(98),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,n=arguments.length>3?arguments[3]:void 0;return F||(F=V),F.addNotice({type:e,content:t,duration:a,onClose:n})}),q={info:function(e,t,a){return J("info",e,t,a)},success:function(e,t,a){return J("success",e,t,a)},warning:function(e,t,a){return J("warning",e,t,a)},error:function(e,t,a){return J("error",e,t,a)},loading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return J("loading",e,t,a)}},$=(a(99),q),K=Object(B.a)((H={},Object(o.a)(H,"USER_LOGIN",function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,r=t.history,c=t.from,e.next=3,l={username:a,password:n},O.a.post("/user/login",{data:j({},l)});case 3:if(200!==(s=e.sent).status||0!==s.data.errorCode){e.next=12;break}return o=s.data,$.success(o.message),g("token",o.token),r.push(c),e.abrupt("return",{userInfo:o.userInfo,avatar:o.avatar});case 12:return $.success(s.data.message),e.abrupt("return",{});case 14:case"end":return e.stop()}var l}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(o.a)(H,"USER_VALIDATE",(function(e){return 0===e.data.errorCode?(g("token",e.data.token),{userInfo:e.data.userInfo,isLogin:!0}):{userInfo:{},isLogin:!1}})),Object(o.a)(H,"USER_GET_ORDERS",function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:if(200!==(a=e.sent).status||0!==a.data.errorCode){e.next=7;break}return e.abrupt("return",a.data.orders);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(o.a)(H,"USER_ADD_ADDRESS",function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.address,r=t.history,c=t.from,e.next=3,C({id:a,address:n});case 3:if(s=e.sent,(o=y("address")||{})[a]=n,200!==s.status||0!==s.data.errorCode){e.next=11;break}return r.replace(c),$.success("\u6dfb\u52a0\u6210\u529f..."),g("address",o),e.abrupt("return",s.data.address);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(o.a)(H,"USER_GET_ADDRESS",function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:if(200!==(a=e.sent).status||0!==a.data.errorCode){e.next=5;break}return e.abrupt("return",a.data.address);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(o.a)(H,"USER_SELECT_ADDRESS",(function(e){var t=e.userId,a=e.CurrentAddress,n=y("address")||{};return n[t]=a,g("address",n),e})),Object(o.a)(H,"USER_CHANGE_AVATAR",(function(e){return e})),H)),W={userLogin:K.userLogin,userValidate:K.userValidate,userGetOrders:K.userGetOrders,userAddAddress:K.userAddAddress,userGetAddress:K.userGetAddress,userSelectAddress:K.userSelectAddress,userChangeAvatar:K.userChangeAvatar},Y=a(44);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var X=Object(Y.a)("SHOP_GETDATA",function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:return a=e.sent,e.abrupt("return",a.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(Y.a)("SHOP_CARTLIST",(function(e){return g("cartList",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},y("cartList")||{},Object(o.a)({},e.id,e.cartList))),e.cartList})),ee={user:W,shop:{getShopData:X,setCartList:Z}};function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ae=function(e){function t(e){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).call(this,e))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleClickRegister",value:function(){this.props.history.push("/user/register")}},{key:"handleClickLogin",value:function(){this.props.history.push({pathname:"/user/login",state:{from:"/user"}})}},{key:"historyToInfo",value:function(){this.props.history.push("/user/info")}},{key:"componentDidMount",value:function(){var e=this.props,t=e.userInfo.id,a=e.updateAvatar;Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,D(t);case 3:n=e.sent,a(n.data.avatar);case 5:case"end":return e.stop()}}),e)})))()}},{key:"render",value:function(){var e=this.props,t=e.userInfo,a=t.username,n=t.phone,c=e.avatar;return r.a.createElement("div",{className:"user_container"},a?r.a.createElement("header",{className:"user_detail",onClick:this.historyToInfo.bind(this)},r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:c||"https://cube.elemecdn.com/0/d0/dd7c960f08cdc756b1d3ad54978fdjpeg.jpeg?x-oss-process=image/format,webp/resize,w_90,h_90,m_fixed",alt:""})),r.a.createElement("div",{className:"profile_text"},r.a.createElement("span",null,a),r.a.createElement("span",null,n))),r.a.createElement("span",{className:"split"},">")):r.a.createElement("header",{className:"user_login"},r.a.createElement("button",{className:"register btn",onClick:this.handleClickRegister.bind(this)},"\u6ce8\u518c"),r.a.createElement("button",{className:"login btn",onClick:this.handleClickLogin.bind(this)},"\u767b\u9646")),r.a.createElement("section",{className:"address_b"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"iconfont icon-dizhi"})),r.a.createElement(x.b,{className:"address",to:"/user/address"},r.a.createElement("span",null,"\u6211\u7684\u5730\u5740"),r.a.createElement("span",null,">"))),r.a.createElement("section",{className:"help_container"},r.a.createElement("div",{className:"help"},r.a.createElement("div",{className:"help-i"},r.a.createElement("i",{className:"iconfont icon-kefu"})),r.a.createElement("div",{className:"help-t"},r.a.createElement("span",null,"\u6211\u7684\u5ba2\u670d"),r.a.createElement("span",null,">"))),r.a.createElement("div",{className:"help"},r.a.createElement("div",{className:"help-i"},r.a.createElement("i",{className:"iconfont icon-app"})),r.a.createElement("div",{className:"help-t"},r.a.createElement("span",null,"\u4e0b\u8f7dAPP"),r.a.createElement("span",null,">"))),r.a.createElement("div",{className:"help"},r.a.createElement("div",{className:"help-i"},r.a.createElement("i",{className:"iconfont icon-guize"})),r.a.createElement("div",{className:"help-t gua"},r.a.createElement("span",null,"\u89c4\u5219\u4e2d\u5fc3"),r.a.createElement("span",null,">")))),r.a.createElement(A,null))}}]),t}(n.Component),ne=Object(d.g)(Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.user)}),(function(e,t){return{updateAvatar:function(t){e(ee.user.userChangeAvatar(t))}}}))(ae));function re(e){return e<10?"0"+e:e}function ce(e){var t=(e=e&&new Date(e)||new Date).getFullYear(),a=e.getMonth()+1,n=e.getDate(),r=e.getHours(),c=e.getMinutes(),s=e.getSeconds();return a=re(a),n=re(n),r=re(r),c=re(c),s=re(s),"".concat(t,"-").concat(a,"-").concat(n," ").concat(r,":").concat(c,":").concat(s)}var se=function(e){function t(e){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).call(this,e))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleClickReOrder",value:function(e){this.props.history.push("/shop/".concat(e))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.userInfo.id;(0,e.getOrders)(t)}},{key:"render",value:function(){var e=this,t=this.props.orderList;return r.a.createElement("div",{className:"order_container"},r.a.createElement("div",{className:"title"},"\u8ba2\u5355"),r.a.createElement("div",{className:"order_list"},t.map((function(t,a){return r.a.createElement("div",{className:"order_item",key:a},r.a.createElement(x.b,{className:"order_avatar",to:"/shop/".concat(t.storeId)},r.a.createElement("img",{src:t.storeLogoUrl,alt:"logo"})),r.a.createElement("div",{className:"order_detail"},r.a.createElement("div",{className:"trade_name"},r.a.createElement("div",{className:"trade"},r.a.createElement(x.b,{className:"name",to:"/shop/".concat(t.storeId)},t.storeName),r.a.createElement("div",{className:"spilt"},">"),r.a.createElement("div",{className:"arrive"},"\u5df2\u9001\u8fbe")),r.a.createElement("div",{className:"order_time"},ce(t.time))),r.a.createElement(x.b,{className:"foods_detail",to:"/order_detail/".concat(a)},r.a.createElement("div",{className:"name"},r.a.createElement("div",{className:"n"},t.foods[0].name),r.a.createElement("div",{className:"num"},"\u7b49",t.foods.length,"\u4ef6\u5546\u54c1")),r.a.createElement("div",{className:"price"},"\uffe5",t.price)),r.a.createElement("div",{className:"order_operate"},r.a.createElement("button",{onClick:e.handleClickReOrder.bind(e,t.storeId)},"\u518d\u6765\u4e00\u5355"))))}))),r.a.createElement(A,null))}}]),t}(n.Component),oe=Object(d.g)(Object(m.b)((function(e){return{orderList:e.user.orders,userInfo:e.user.userInfo}}),(function(e,t){return{getOrders:function(t){e(ee.user.userGetOrders(t))}}}))(se)),le=a(14);function ie(e){var t=Object(n.useState)([]),a=Object(le.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){var e=window.localStorage.getItem("historySearchList");console.log(e),e=e&&window.JSON.parse(e)||[],s(e)}),[]),r.a.createElement(r.a.Fragment,null,c.length?r.a.createElement("section",{className:"history_search_wrapper"},r.a.createElement("header",{className:"search_title"},r.a.createElement("span",null,"\u5386\u53f2\u641c\u7d22"),r.a.createElement("div",{"aria-label":"\u6e05\u695a\u5386\u53f2\u641c\u7d22",role:"button",onClick:function(){window.localStorage.setItem("historySearchList",""),s([])}},r.a.createElement("i",{className:"iconfont icon-lajitong"}))),r.a.createElement("section",{className:"search_content"},c.map((function(e,t){return r.a.createElement("button",{className:"search_item",key:t},e)})))):"",r.a.createElement("section",{className:"hot_search_wrapper"},r.a.createElement("header",{className:"search_title"},"\u70ed\u95e8\u641c\u7d22"),r.a.createElement("section",{className:"search_content"},r.a.createElement("button",{className:"search_item"},"\u8fc7\u6865\u7c73\u7ebf"),r.a.createElement("button",{className:"search_item"},"\u5976\u8336"),r.a.createElement("button",{className:"search_item"},"\u539f\u521b"),r.a.createElement("button",{className:"search_item"},"\u9ec4\u7116\u9e21"),r.a.createElement("button",{className:"search_item"},"\u7172\u4ed4\u996d"))))}var ue=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleClickGoBack",value:function(){window.history.go(-1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"search_container"},r.a.createElement("section",{className:"header-search"},r.a.createElement("div",{className:"goback",onClick:this.handleClickGoBack},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("form",{className:"search_input"},r.a.createElement("i",{className:"iconfont icon-sousuo"}),r.a.createElement("input",{type:"search",placeholder:"\u8f93\u5165\u5546\u5bb6\u3001\u5546\u54c1\u540d\u79f0"}),r.a.createElement("button",{className:"btn"},"\u641c\u7d22"))),r.a.createElement(ie,null))}}]),t}(n.Component);function me(e){var t=Object(n.useState)(["\u70b9\u9910","\u8bc4\u4ef7","\u5546\u5bb6"]),a=Object(le.a)(t,1)[0],c=e.currentIndex,s=e.setCurrentIndex;return r.a.createElement("nav",{className:"shop_tabbar"},a.map((function(e,t){return r.a.createElement("div",{className:"tabbar_item",key:t+"",onClick:function(){return s(t)}},e,r.a.createElement("span",{className:c===t?"active":""}))})))}function de(e,t){return e.filter((function(e){return e.id==t}))[0]}function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var fe=Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.shop)}))((function(e){var t=e.shopData.foods_commend,a=e.cartList,n=e.handleAddToCart,c=e.handleReduceCart;return r.a.createElement("div",{className:"merchant_recommendation"},r.a.createElement("h2",null,"\u5546\u5bb6\u63a8\u8350"),r.a.createElement("div",{className:"recommend"},r.a.createElement("div",{className:"recommend_wrapper"},t&&t.map((function(e){return r.a.createElement("div",{className:"recommend_item",key:e._id},r.a.createElement("img",{src:e.food_pic||"http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg",alt:""}),r.a.createElement("div",{className:"food_detail"},r.a.createElement("p",{className:"food_name"},e.food_name),r.a.createElement("p",{className:"food_data"},"\u6708\u552e",e.food_sales," \u597d\u8bc4\u7387100%"),r.a.createElement("div",{className:"food_card"},r.a.createElement("span",null,"\uffe5",e.food_price),r.a.createElement("span",{className:"operate"},de(a,e.food_id)?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{"data-id":e.food_id,onClick:c},r.a.createElement("i",{className:"iconfont icon-jian"})),r.a.createElement("span",null,de(a,e.food_id).num)):"",r.a.createElement("a",{"data-name":e.food_name,"data-id":e.food_id,"data-price":e.food_price,"data-pic":e.food_pic||"http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg",onClick:n},r.a.createElement("i",{className:"iconfont icon-add"}))))))})))))}));function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ee=Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.shop)}),(function(e,t){return{updataCartList:function(t){e(ee.shop.setCartList(t))}}}))((function(e){var t=Object(n.useState)(0),a=Object(le.a)(t,2),c=a[0],s=a[1],o=Object(n.useRef)(null),l=e.shopData,i=l.foods_commend,u=l.store_categories,m=e.cartList,d=e.storeId;function p(e){var t=e.currentTarget.getAttribute("data-index");if(c!=t){s(parseInt(t));var a=o.current,n=o.current.children;if(n[t])var r,l=n[t].offsetTop,i=window.setInterval((function(){a.scrollTop>l?((a.scrollTop<=l||r===a.scrollTop)&&(a.scrollTop=l,clearInterval(i)),r=a.scrollTop,a.scrollTop-=3):((a.scrollTop>=l||r===a.scrollTop)&&(a.scrollTop=l,clearInterval(i)),r=a.scrollTop,a.scrollTop+=3)}),3)}}function f(t){var a=t.currentTarget.getAttribute("data-name"),n=t.currentTarget.getAttribute("data-id"),r=t.currentTarget.getAttribute("data-price"),c=t.currentTarget.getAttribute("data-pic"),s=!1,o=JSON.parse(JSON.stringify(m));o=o.map((function(e){return e.id===n?(s=!0,e.num=e.num+1,e):e})),!s&&o.push({name:a,id:n,price:r,pic:c,num:1}),e.updataCartList({id:d,cartList:o})}function h(t){var a=t.currentTarget.getAttribute("data-id"),n=JSON.parse(JSON.stringify(m)),r=n.findIndex((function(e){return e.id===a}));1===n[r].num?n.splice(r,1):n[r].num-=1,e.updataCartList({id:d,cartList:n})}return r.a.createElement(r.a.Fragment,null,i&&!i.length?"":r.a.createElement(fe,{handleAddToCart:f,handleReduceCart:h}),r.a.createElement("div",{className:"menuview_wrapper"},r.a.createElement("main",{className:"menuview_main"},r.a.createElement("div",{className:"left_menu"},r.a.createElement("ul",{className:"menu_category"},u&&u.map((function(e,t){return e.children.length?r.a.createElement("li",{className:t===c?"menu_item active":"menu_item","data-index":t,onClick:p,key:t},e.cat_name):""})))),r.a.createElement("div",{className:"right_content"},r.a.createElement("div",{ref:o,className:"scroller"},u&&u.map((function(e,t){return e.children.length?r.a.createElement("dl",{key:t},r.a.createElement("dt",null,r.a.createElement("div",{className:"food_title"},r.a.createElement("strong",null,e.cat_name),0===t?r.a.createElement("span",null,"\u5927\u5bb6\u559c\u6b22\u5403\uff0c\u624d\u53eb\u771f\u597d\u5403\u3002"):"")),e.children.map((function(e,t){return r.a.createElement("dd",{key:t},r.a.createElement("div",{className:"food_detail_wrapper"},r.a.createElement("span",{className:"food_pic"},r.a.createElement("img",{src:e.food_pic||"http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg",alt:""})),r.a.createElement("section",{className:"food"},r.a.createElement("div",{className:"food_detail"},r.a.createElement("p",{className:"food_name"},e.food_name),r.a.createElement("p",{className:"food_desc"},e.food_ingredient),r.a.createElement("p",{className:"food_sales"},r.a.createElement("span",null,"\u6708\u552e",e.food_sales,"\u4efd"),r.a.createElement("span",null,"\u597d\u8bc4\u7387100%"))),r.a.createElement("div",{className:"food_card"},r.a.createElement("span",null,"\uffe5",e.food_price),r.a.createElement("span",{className:"operate"},de(m,e.food_id)?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{"data-id":e.food_id,onClick:h},r.a.createElement("i",{className:"iconfont icon-jian"})),r.a.createElement("span",null,de(m,e.food_id).num)):"",r.a.createElement("a",{"data-name":e.food_name,"data-id":e.food_id,"data-pic":e.food_pic||"http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg","data-price":e.food_price,onClick:f},r.a.createElement("i",{className:"iconfont icon-add"})))))))}))):""})))))))}));function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ve=Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.shop)}))((function(e){return console.log("===================================="),console.log(e),console.log("===================================="),r.a.createElement("div",{className:"shop_comment_container"},r.a.createElement("section",{className:"shop_rate"},r.a.createElement("div",{className:"rate"},r.a.createElement("p",null,"4.6"),r.a.createElement("div",{className:"rate_icon"},r.a.createElement("span",null,"\u5546\u5bb6\u8bc4\u5206"),r.a.createElement(L,{rate:4.6}))),r.a.createElement("div",{className:"taste_score"},r.a.createElement("div",{className:"taste"},r.a.createElement("span",null,"\u5473\u9053"),r.a.createElement("span",null,"4.6")),r.a.createElement("div",{className:"taste"},r.a.createElement("span",null,"\u5305\u88c5"),r.a.createElement("span",null,"4.6"))),r.a.createElement("div",{className:"dispatch_rate"},r.a.createElement("span",null,"\u914d\u9001"),r.a.createElement("span",null,"5.0"))),r.a.createElement("section",{className:"comment_wrapper"}))}));function Oe(){return r.a.createElement("div",{className:"shop_info_wrapper"},r.a.createElement("section",{className:"dispatch_info"},r.a.createElement("h3",null,"\u914d\u9001\u4fe1\u606f"),r.a.createElement("p",null,"\u7ea630\u5206\u949f\u9001\u8fbe\uff0c\u8ddd\u79bb593m"),r.a.createElement("p",null,"\u914d\u9001\u8d39\uffe50")),r.a.createElement("section",{className:"merchant_service"},r.a.createElement("h3",null,"\u5546\u5bb6\u670d\u52a1"),r.a.createElement("p",null,"\u8be5\u5546\u6237\u98df\u54c1\u5b89\u5168\u5df2\u7531\u56fd\u6cf0\u4ea7\u9669\u627f\u62c5\uff0c\u98df\u54c1\u5b89\u5168\u6709\u4fdd\u969c")),r.a.createElement("section",{className:"merchant_info"},r.a.createElement("h3",null,"\u5546\u5bb6\u4fe1\u606f"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u672c\u5e97\u4f18\u5148\u914d\u9001\u997f\u4e86\u4e48\u3000\u901f\u5ea6\u66f4\u5feb\u4ef7\u683c\u66f4\u723d\u3000\u8fd9\u4e48\u594b\u6597\u7684\u4f60\u4e0d\u5c31\u662f\u4e3a\u5403\u987f\u597d\u7684\u4e48\u3000\u5728\u54c1\u5473\u7f8e\u98df\u7684\u8def\u4e0a\u5bfb\u627e\u7231\u3000\u4f60\u53ea\u9700\u8f7b\u8f7b\u6309\u4e0b\u624b\u673a\u3000\u653e\u677e\u5fc3\u60c5\u3000\u8eba\u5728\u5e8a\u4e0a\u3000\u542c\u542c\u97f3\u4e50\u3000\u7f8e\u98df\u5c31\u5728\u8def\u4e0a\u3000\u4e00\u4efd\u5916\u5356\u6ee1\u6ee1\u7684\u90fd\u662f\u7231"),r.a.createElement("li",null,r.a.createElement("span",null,"\u54c1\u7c7b"),r.a.createElement("span",null,"\u5176\u4ed6\u83dc\u7cfb,\u76d6\u6d47\u996d")),r.a.createElement("li",null,r.a.createElement("span",null,"\u5546\u5bb6\u7535\u8bdd"),r.a.createElement("a",{href:"tel:10086"},r.a.createElement("i",{className:"iconfont icon-dianhua"}),r.a.createElement("span",null,"\u5546\u5bb6\u7535\u8bdd"))),r.a.createElement("li",null,r.a.createElement("span",null,"\u5730\u5740"),r.a.createElement("span",null,"\u4e5d\u6c5f\u5e02\u5171\u9752\u57ce\u5e02\u91d1\u7eba\u8def\u897f\u4fa7\u4e58\u98ce\u82b1\u56ed39\u53f7")),r.a.createElement("li",null,r.a.createElement("span",null,"\u8425\u4e1a\u65f6\u95f4"),r.a.createElement("span",null,"09:00-14:00,16:30-21:00")))),r.a.createElement("section",{className:"qualifal"},r.a.createElement("h3",null,"\u8425\u4e1a\u8d44\u8d28")))}var ye=Object(m.b)((function(e){return{cartList:e.shop.cartList,isLogin:e.user.isLogin}}))((function(e){var t=e.cartList,a=e.isLogin,n=e.history,c=e.location,s=!t.length,o=0;return t.forEach((function(e){o+=parseFloat(e.price)*e.num})),o=o.toFixed(2),r.a.createElement("div",{className:"bottom_cart_container"},s?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"cart_icon"},r.a.createElement("i",{className:"iconfont icon-icon_cart"})),r.a.createElement("div",{className:"cart_setail"},"\u672a\u9009\u8d2d\u5546\u54c1"),r.a.createElement("div",{className:"pay"},"\uffe50\u8d77\u9001")):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"cart_icon active"},r.a.createElement("i",{className:"iconfont icon-icon_cart active"})),r.a.createElement("div",{className:"cart_setail"},r.a.createElement("p",{className:"all_price"},"\uffe5",o)),r.a.createElement("div",{className:"pay active",onClick:function(){a?n.push("/order_confim"):n.push({pathname:"/user/login",state:{from:c.pathname}})}},"\u53bb\u7ed3\u7b97")))}));function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ne=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).state={currentIndex:0},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"setCurrentIndex",value:function(e){this.setState({currentIndex:e})}},{key:"clickGoback",value:function(){this.props.history.go(-1)}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.setShopData(e);var t=(y("cartList")||{})[e]||[];this.props.setCartList({id:e,cartList:t})}},{key:"render",value:function(){var e=this.state.currentIndex,t=this.props,a=t.shopData,n=t.history,c=t.location,s=this.props.match.params.id;return r.a.createElement("div",{className:"goods_container"},r.a.createElement("div",{className:"store_detail"},r.a.createElement("nav",{className:"nav_goback",style:{backgroundImage:"url(".concat(a.store_pic,")")}},r.a.createElement("a",{className:"goback",onClick:this.clickGoback.bind(this)},r.a.createElement("i",{className:"iconfont icon-you-copy"}))),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"store_logo"},r.a.createElement("img",{src:a.store_logo_url,alt:"logo"})),r.a.createElement("div",{className:"store_name"},r.a.createElement("h2",null,a.store_name)),r.a.createElement("div",{className:"store_data"},r.a.createElement("span",null,"\u8bc4\u4ef7",a.store_grade),r.a.createElement("span",null,"\u6708\u552e",a.store_sales,"\u5355"),r.a.createElement("span",null,"\u7ea630\u5206\u949f")),r.a.createElement("div",{className:"store_notice"},r.a.createElement("span",null,"\u516c\u544a: ",a.store_notice)))),r.a.createElement("div",{className:"shop_tab"},r.a.createElement(me,{currentIndex:e,setCurrentIndex:this.setCurrentIndex.bind(this)})),r.a.createElement("div",{className:"main_content"},0===e?r.a.createElement(Ee,{storeId:s}):1===e?r.a.createElement(ve,null):r.a.createElement(Oe,null)),r.a.createElement(ye,{history:n,location:c}))}}]),t}(n.Component),je=Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.shop)}),(function(e){return{setShopData:function(t){e(ee.shop.getShopData(t))},setCartList:function(t){e(ee.shop.setCartList(t))}}}))(Ne),_e=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.contentText,a=e.onOk;return r.a.createElement("div",{className:"modal-alert dialog"},r.a.createElement("h4",null,t),r.a.createElement("button",{type:"button",onClick:function(){a&&a()}},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-check-circle-fill"}))))}}]),t}(n.Component),we=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.contentText,a=e.onOk,n=e.onCancel;return r.a.createElement("div",{className:"modal-confirm dialog"},r.a.createElement("h4",null,t),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("button",{type:"button",className:"check",onClick:function(){a&&a()}},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-check-circle-fill"}))),r.a.createElement("button",{type:"button",className:"close",onClick:function(){n&&n()}},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-close-circle-fill"})))))}}]),t}(n.Component),ke=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(E.a)(t).call(this))).handleChange=e.handleChange.bind(Object(z.a)(e)),e.state={enterContent:""},e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){this.setState({enterContent:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.contentText,a=e.onOk,n=e.onCancel,c=this.state.enterContent;return r.a.createElement("div",{className:"modal-prompt dialog"},r.a.createElement("h4",null,t),r.a.createElement("input",{type:"text",value:c,onChange:this.handleChange}),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("button",{type:"button",className:"check",onClick:function(){a&&a(c)}},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-check-circle-fill"}))),r.a.createElement("button",{type:"button",className:"close",onClick:function(){n&&n()}},r.a.createElement("svg",{className:"icon","aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-close-circle-fill"})))))}}]),t}(n.Component);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pe="alert",De="confirm",xe="prompt",Le=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(E.a)(t).call(this))).onClose=e.onClose.bind(Object(z.a)(e)),e.transitionTime=300,e.state={showDialog:!1},e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({showDialog:!0})}},{key:"onClose",value:function(e,t){var a=this.props,n=a.onOk,r=a.onCancel,c=a.removeDialog;e&&n?n(t):r&&r(),setTimeout(c,this.transitionTime),this.setState({showDialog:!1})}},{key:"renderDialogForType",value:function(e,t){switch(e){case Pe:return r.a.createElement(_e,t);case De:return r.a.createElement(we,t);case xe:return r.a.createElement(ke,t);default:throw new Error("dialog type error")}}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.contentText,n=this.onClose,c=this.state.showDialog;return r.a.createElement(M.CSSTransition,{in:c,classNames:"modal-wrapper",timeout:this.transitionTime},r.a.createElement("div",{className:"modal"},r.a.createElement(M.CSSTransition,{in:c,classNames:"dialog-wrapper",timeout:this.transitionTime},this.renderDialogForType(t,{contentText:a,onOk:function(e){n(!0,e)},onCancel:function(){n(!1)}}))))}}]),t}(n.Component);function Ae(e){var t=document.createElement("div");document.body.appendChild(t),s.a.render(r.a.createElement(Le,Object.assign({},e,{removeDialog:function(){s.a.unmountComponentAtNode(t),document.body.removeChild(t)}})),t)}var Te={alert:function(e){Ae(Se({type:Pe},e))},confirm:function(e){Ae(Se({type:De},e))},prompt:function(e){Ae(Se({type:xe},e))}},Ie=(a(102),a(103),Te);function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ze=Object(m.b)((function(e){return Be({},e.shop,{userInfo:e.user.userInfo})}),(function(e,t){return{updateCart:function(t){e(ee.shop.setCartList(Be({},t)))},getAddress:function(t){e(ee.user.userSelectAddress(t))}}}))((function(e){var t=e.shopData,a=e.cartList,c=e.userInfo,s=e.updateCart,o=e.getAddress,l=Object(n.useState)({}),m=Object(le.a)(l,2),d=m[0],p=m[1],f=Object(n.useState)({}),h=Object(le.a)(f,2),E=h[0],b=h[1];return Object(n.useEffect)((function(){var e=y("order"),n=y("address")||{};if(n[c.id]&&n[c.id].name&&(b(n[c.id]),o(n[c.id])),e&&e.storeName)p(Be({},e));else{var r=0;a.forEach((function(e){r+=parseFloat(e.price)*e.num})),r+=t.distribution_cost;var s={storeName:t.store_name,dispatchCost:t.distribution_cost,cartList:a,allPrice:r};p(s),g("order",s)}}),[]),r.a.createElement("div",{className:"order_confim_container"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){e.history.go(-1),g("order",{})}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u786e\u8ba4\u8ba2\u5355")),r.a.createElement("section",{className:"address"},E.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u8ba2\u5355\u914d\u9001\u81f3"),r.a.createElement(x.b,{to:"/user/address/select"},r.a.createElement("p",null,r.a.createElement("span",null,E.address),r.a.createElement("span",null,">")),r.a.createElement("div",{className:"user_detail"},r.a.createElement("span",null,E.name),r.a.createElement("span",null,E.phone)))):r.a.createElement(x.b,{to:"/user/address/select",className:"address_select"},"\u9009\u62e9\u5730\u5740")),r.a.createElement("section",{className:"cart_group"},r.a.createElement("h3",{className:"cart_storename"},d.storeName),r.a.createElement("ul",{className:"foods"},d.cartList&&d.cartList.map((function(e,t){return r.a.createElement("li",{className:"cart_item",key:t},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:e.pic,alt:"logo"})),r.a.createElement("span",{className:"name"},e.name),r.a.createElement("span",{className:"num"},"x ",e.num),r.a.createElement("span",{className:"price"},"\uffe5",e.price))}))),r.a.createElement("div",{className:"dispatch_cost other"},r.a.createElement("span",null,"\u914d\u9001\u8d39"),r.a.createElement("span",null,"\uffe5",d.dispatchCost)),r.a.createElement("div",{className:"price other"},r.a.createElement("span",null,"\u4f18\u60e0\u8bf4\u660e"),r.a.createElement("span",null,"\u5c0f\u8ba1 \uffe5",r.a.createElement("span",{className:"all_price"},d.allPrice))),r.a.createElement("footer",{className:"pay_bar"},r.a.createElement("span",null,"\uffe5",d.allPrice),r.a.createElement("div",{className:"pay",onClick:function(){Ie.confirm({contentText:"\u786e\u8ba4\u652f\u4ed8",onOk:function(){var n=Object(u.a)(i.a.mark((function n(){var r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={userId:c.id,storeId:t._id,storeName:t.store_name,storeLogoUrl:t.store_logo_url,foods:a,price:d.allPrice,address:E},n.next=3,l=r,O.a.post("/order",{data:l});case 3:200===(o=n.sent).status&&0===o.data.errorCode?($.success("\u652f\u4ed8\u6210\u529f"),s({id:t._id,cartList:[]}),g("order",{}),e.history.push("/order")):$.error("\u670d\u52a1\u5668\u6b63\u5fd9...");case 5:case"end":return n.stop()}var l}),n)})));return function(){return n.apply(this,arguments)}}()})}},"\u53bb\u652f\u4ed8"))))}));var Me=Object(m.b)((function(e){return{orderList:e.user.orders}}))((function(e){var t=Object(n.useState)({}),a=Object(le.a)(t,2),c=a[0],s=a[1],o=e.orderList,l=e.match;return Object(n.useEffect)((function(){var e=o[l.params.index];s(e)}),[]),r.a.createElement("div",{className:"order_detail_container"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){e.history.go(-1)}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u8ba2\u5355\u8be6\u60c5")),r.a.createElement("section",{className:"order_group"},r.a.createElement("div",{className:"title"},"\u8ba2\u5355\u4fe1\u606f"),r.a.createElement("ul",null,r.a.createElement("li",{className:"order_item"},"\u8ba2\u5355\u53f7\uff1a",c.num),r.a.createElement("li",{className:"order_item"},"\u652f\u4ed8\u65b9\u5f0f: \u5728\u7ebf\u652f\u4ed8"),r.a.createElement("li",{className:"order_item"},"\u4e0b\u5355\u65f6\u95f4: ",ce(c.time)))))}));var Ue=function(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useRef)(null);function s(){return(s=Object(u.a)(i.a.mark((function n(){var r,s,o,l,u,m,d;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.current.value,s=c.current.value,o=a.current.value,l=/^\S{2,16}$/,u=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,m=/^\S{6,16}$/,""!==r&&""!==s&&""!==o){n.next=5;break}return n.abrupt("return",$.error("\u624b\u673a\u53f7\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"));case 5:if(l.test(r)){n.next=9;break}return n.abrupt("return",$.error("\u7528\u6237\u540d\u4e0d\u5408\u6cd5"));case 9:if(u.test(s)){n.next=13;break}return n.abrupt("return",$.error("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5"));case 13:if(m.test(o)){n.next=15;break}return n.abrupt("return",$.error("\u5bc6\u7801\u957f\u5ea6\u4e3a6-16"));case 15:return n.next=17,i={username:r,phone:s,password:o},O.a.post("/user/register",{data:j({},i)});case 17:return 200===(d=n.sent).status&&0===d.data.errorCode&&e.history.push("/user/login"),n.abrupt("return",$.success(d.data.message+", \u8bf7\u767b\u5f55",5e3));case 20:case"end":return n.stop()}var i}),n)})))).apply(this,arguments)}return r.a.createElement("div",{className:"register_wrapper"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){e.history.go(-1)}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u7528\u6237\u6ce8\u518c")),r.a.createElement("section",{className:"form_group"},r.a.createElement("div",{className:"form"},r.a.createElement("label",{htmlFor:"phone"},"\u624b\xa0\xa0\xa0\xa0\xa0\u673a:",r.a.createElement("input",{type:"text",name:"phone",id:"phone",ref:c})),r.a.createElement("label",{htmlFor:"username"},"\u7528\xa0\u6237\xa0\u540d:",r.a.createElement("input",{id:"username",name:"username",type:"text",ref:t})),r.a.createElement("label",{htmlFor:"password"},"\u5bc6\xa0\xa0\xa0\xa0\xa0\u7801:",r.a.createElement("input",{type:"password",name:"password",id:"password",ref:a})),r.a.createElement("button",{className:"btn",onClick:function(){return s.apply(this,arguments)}},"\u6ce8\u518c"))))};function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var He=Object(m.b)((function(e){return Fe({},e.user)}),(function(e){return{userLogin:function(t){e(W.userLogin(Fe({},t)))}}}))((function(e){var t=e.isLogin,a=e.history,c=e.location,s=e.userLogin,o=Object(n.useRef)(null),l=Object(n.useRef)(null),m=Object(n.useState)(""),d=Object(le.a)(m,2),p=d[0],f=d[1];function h(){return(h=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.current.value,n=l.current.value,""!==t&&""!==n){e.next=3;break}return e.abrupt("return",$.error("\u8bf7\u8f93\u5165\u8d26\u53f7\u5bc6\u7801"));case 3:s({username:t,password:n,history:a,from:p});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=c.state&&c.state.from;"/order"!==e&&"/user/address"!==e||!t?t?a.push("/"):/(\/shop)/.test(e)&&!t?($.error("\u8fd8\u672a\u767b\u9646, \u8bf7\u767b\u9646..."),f(e)):f(e):a.push(e)}),[t]),r.a.createElement("div",{className:"login_wrapper"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){a.go(-1)}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u7528\u6237\u767b\u9646")),r.a.createElement("section",{className:"form_group"},r.a.createElement("div",{className:"form"},r.a.createElement("input",{ref:o,id:"username",name:"username",type:"text",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u6216\u624b\u673a\u53f7"}),r.a.createElement("input",{ref:l,type:"password",name:"password",id:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}),r.a.createElement("button",{className:"btn",onClick:function(){return h.apply(this,arguments)}},"\u767b\u9646"))))}));var Ve=Object(m.b)((function(e){return{addressList:e.user.address,userInfo:e.user.userInfo}}),(function(e,t){return{getAddress:function(t){e(ee.user.userGetAddress(t))}}}))((function(e){var t=e.history,a=e.addressList,c=e.getAddress,s=e.userInfo;return Object(n.useEffect)((function(){c(s.id)}),[]),r.a.createElement("div",{className:"myaddress_container"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){t.goBack()}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u6211\u7684\u5730\u5740")),r.a.createElement("section",{className:"address_group"},a.map((function(e,t){return r.a.createElement("div",{className:"address_item",key:t},r.a.createElement("div",{className:"address_detail"},r.a.createElement("div",{className:"receiver_info"},r.a.createElement("span",{className:"name"},e.name),r.a.createElement("span",{className:"phone"},e.phone)),r.a.createElement("div",{className:"address_info"},r.a.createElement("span",null,e.address),r.a.createElement("span",null,"10\u680b"))),r.a.createElement("div",{className:"operate"},r.a.createElement("span",{className:"iconfont icon-xiugai"}),r.a.createElement("span",{className:"iconfont icon-cha"})))}))),r.a.createElement(x.b,{className:"footer",to:function(e){return{pathname:"/user/address/add",state:{from:e.pathname}}}},r.a.createElement("span",{className:"iconfont icon-jia"}),r.a.createElement("p",null,"\u65b0\u589e\u6536\u8d27\u5730\u5740")))}));var Je=Object(m.b)((function(e){return{userInfo:e.user.userInfo}}),(function(e,t){return{addDre:function(t){e(ee.user.userAddAddress(t))}}}))((function(e){var t=e.history,a=e.userInfo,c=e.addDre,s=e.location,o=Object(n.useRef)(null),l=Object(n.useRef)(null),i=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useState)(""),d=Object(le.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)((function(){var e=s.state&&s.state.from;f(e)}),[]),r.a.createElement("div",{className:"add_address"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){t.goBack()}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u6dfb\u52a0\u5730\u5740")),r.a.createElement("main",{className:"content"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"linkman"},r.a.createElement("span",null,"\u8054\u7cfb\u4eba"),r.a.createElement("input",{ref:o,type:"text",placeholder:"\u59d3\u540d"})),r.a.createElement("div",{className:"linkman"},r.a.createElement("span",null,"\u7535\u8bdd"),r.a.createElement("input",{ref:l,type:"text",placeholder:"\u624b\u673a\u53f7\u7801"})),r.a.createElement("div",{className:"linkman"},r.a.createElement("span",null,"\u5730\u5740"),r.a.createElement("input",{ref:i,type:"text",placeholder:"\u5c0f\u533a/\u5199\u5b57\u697c/\u5b66\u6821"})),r.a.createElement("div",{className:"linkman"},r.a.createElement("span",null,"\u8be6\u7ec6"),r.a.createElement("input",{ref:u,type:"text",placeholder:"\u95e8\u724c\u53f7"}))),r.a.createElement("div",{className:"form_btn"},r.a.createElement("button",{className:"btn",onClick:function(){var e=o.current.value,n=l.current.value,r=i.current.value,s=u.current.value;if(!e||!n||!r||!s)return $.warning("\u4e0d\u80fd\u4e3a\u7a7a, \u5fc5\u987b\u586b\u5199...");c({id:a.id,address:{name:e,phone:n,address:r+s},history:t,from:p})}},"\u786e\u5b9a"))))}));var qe=Object(m.b)((function(e){return{addressList:e.user.address,userInfo:e.user.userInfo}}),(function(e,t){return{getAddress:function(t){e(ee.user.userGetAddress(t))},setCurrentAddress:function(t){e(ee.user.userSelectAddress(t))}}}))((function(e){var t=e.history,a=e.addressList,c=e.getAddress,s=e.userInfo,o=e.setCurrentAddress;function l(e){var n=e.currentTarget.getAttribute("data-index");o({CurrentAddress:a[n],userId:s.id}),t.goBack()}return Object(n.useEffect)((function(){c(s.id)}),[]),r.a.createElement("div",{className:"myaddress_container"},r.a.createElement("header",{className:"confim_head"},r.a.createElement("span",{onClick:function(){t.goBack()}},r.a.createElement("i",{className:"iconfont icon-you-copy"})),r.a.createElement("h1",null,"\u9009\u62e9\u5730\u5740")),r.a.createElement("section",{className:"address_group"},a.map((function(e,t){return r.a.createElement("div",{className:"address_item",key:t,"data-index":t,onClick:l},r.a.createElement("div",{className:"address_detail"},r.a.createElement("div",{className:"receiver_info"},r.a.createElement("span",{className:"name"},e.name),r.a.createElement("span",{className:"phone"},e.phone)),r.a.createElement("div",{className:"address_info"},r.a.createElement("span",null,e.address))),r.a.createElement("div",{className:"operate"},r.a.createElement("span",{className:"iconfont icon-xiugai"}),r.a.createElement("span",{className:"iconfont icon-cha"})))}))),r.a.createElement(x.b,{className:"footer",to:function(e){return{pathname:"/user/address/add",state:{from:e.pathname}}}},r.a.createElement("span",{className:"iconfont icon-jia"}),r.a.createElement("p",null,"\u65b0\u589e\u6536\u8d27\u5730\u5740")))}));a(104);var $e=Object(m.b)((function(e){return{userInfo:e.user.userInfo,avatar:e.user.avatar}}),(function(e,t){return{validateToken:function(t){e(ee.user.userValidate(t))}}}))((function(e){var t=e.userInfo,a=e.validateToken,n=e.history,c=e.avatar;return r.a.createElement("div",{className:"user_info_contaienr"},r.a.createElement("div",{className:"avatar item",onClick:function(){n.push("/user/avatar")}},r.a.createElement("b",null,"\u5934\u50cf"),r.a.createElement("div",{className:"avatar_img"},r.a.createElement("img",{src:c||"https://cube.elemecdn.com/0/d0/dd7c960f08cdc756b1d3ad54978fdjpeg.jpeg?x-oss-process=image/format,webp/resize,w_90,h_90,m_fixed",alt:""}),r.a.createElement("span",{className:"icon"},">"))),r.a.createElement("div",{className:"username item"},r.a.createElement("b",null,"\u7528\u6237\u540d"),r.a.createElement("span",null,t.username)),r.a.createElement("h2",null,"\u8d26\u53f7\u7ed1\u5b9a"),r.a.createElement("div",{className:"phone item"},r.a.createElement("b",null,"\u624b\u673a"),r.a.createElement("span",{className:"content"},r.a.createElement("span",null,t.phone),r.a.createElement("span",{className:"icon"},">"))),r.a.createElement("h2",null,"\u5b89\u5168\u8bbe\u7f6e"),r.a.createElement("div",{className:"phone item"},r.a.createElement("b",null,"\u767b\u5f55\u5bc6\u7801"),r.a.createElement("span",{className:"content"},r.a.createElement("span",{className:"change_text"},"\u4fee\u6539"),r.a.createElement("span",{className:"icon"},">"))),r.a.createElement("button",{className:"back_btn",onClick:function(){g("token",""),a({data:{errorCode:1,message:"\u767b\u5f55\u5b9e\u6548, \u8bf7\u91cd\u65b0\u767b\u9646..."}}),n.push({pathname:"/user/login",state:{from:"/user"}})}},"\u9000\u51fa\u767b\u5f55"))}));a(105);var Ke=[{path:"/",name:"Home",component:R},{path:"/user/register",name:"Refister",component:Ue},{path:"/user/login",name:"Login",component:He},{path:"/user/address/add",name:"AddressAdd",component:Je},{path:"/user/address/select",name:"AddressSelect",component:qe},{path:"/user/address",name:"MyAddress",component:Ve,auth:!0},{path:"/user/info",name:"UserInfo",component:$e,auth:!0},{path:"/user/avatar",name:"Avatar",component:Object(m.b)((function(e){return{userInfo:e.user.userInfo}}),(function(e,t){return{updateAvatar:function(t){e(ee.user.userChangeAvatar(t))}}}))((function(e){var t=e.userInfo,a=e.history,c=e.updateAvatar,s=Object(n.useRef)(null),o=Object(n.useRef)(null),l=Object(n.useState)(!1),m=Object(le.a)(l,2),d=m[0],p=m[1];function f(){return(f=Object(u.a)(i.a.mark((function e(){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.current.files[0]){e.next=5;break}$.error("\u8bf7\u9009\u62e9\u6587\u4ef6..."),e.next=11;break;case 5:return(r=new FormData).append("avatar",n),e.next=9,P({id:t.id,data:r});case 9:0===(o=e.sent).data.errorCode&&($.success("\u4fee\u6539\u6210\u529f..."),c(o.data.avatar),a.push("/user/info"));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=s.current;e.addEventListener("change",(function(){var t=e.files[0],a=o.current;if(t){var n=window.URL.createObjectURL(t);a.src=n,a.onload=function(){window.URL.revokeObjectURL(n)},p(!0)}else p(!1)}))}),[]),r.a.createElement("div",{className:"upload"},r.a.createElement("section",{className:"head_bar"},r.a.createElement("span",{onClick:function(){a.goBack()}},"\u8fd4\u56de"),r.a.createElement("span",{onClick:function(){return f.apply(this,arguments)}},"\u786e\u8ba4")),r.a.createElement("div",{className:"up"},r.a.createElement("button",{type:"button",className:"btn",onClick:function(){s.current.click()}},d?r.a.createElement("span",null,"\u91cd\u65b0\u9009\u62e9"):r.a.createElement("span",null,"\u9009\u62e9\u56fe\u7247"),r.a.createElement("img",{ref:o,src:"",alt:"",style:{display:d?"inline-block":"none",width:"100%",height:"100%",borderRadius:"100%"}})),r.a.createElement("input",{type:"file",ref:s,name:"avatar",id:"avatar",accept:".jpg, .jpeg, .png"})))})),auth:!0},{path:"/user",name:"User",component:ne},{path:"/order",name:"Order",component:oe,auth:!0},{path:"/search",name:"Search",component:ue},{path:"/shop/:id",name:"Shop",component:je},{path:"/order_confim",name:"OrderConfirm",component:ze,auth:!0},{path:"/order_detail/:index",name:"OrderDetail",component:Me}];function We(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ye=Object(d.g)(Object(m.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?We(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):We(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.user)}),(function(e){return{validate:function(t){e(W.userValidate(t))}}}))((function(e){var t=e.validate,a=e.isLogin,c=e.history;return Object(n.useEffect)((function(){Object(u.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return(n=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:200===(a=e.sent).status&&t(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(){return n.apply(this,arguments)},e.next=4,a();case 4:c.listen(function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/user/avatar"===t.pathname&&"POP"===n&&c.push("/user"),e.next=3,a();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(d.d,null,Ke.map((function(e,t){return r.a.createElement(d.b,{exact:!0,key:t,path:e.path,render:function(t){return e.auth?a?r.a.createElement(e.component,t):r.a.createElement(d.a,{to:{pathname:"/user/login",state:{from:t.location.pathname}}}):r.a.createElement(e.component,t)}})})))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe,Xe=a(29),Ze=a(112);function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var at,nt=Object(Ze.a)((Qe={},Object(o.a)(Qe,"USER_LOGIN",(function(e,t){return tt({},e,{userInfo:t.payload.userInfo,avatar:t.payload.avatar})})),Object(o.a)(Qe,"USER_VALIDATE",(function(e,t){var a=t.payload,n=a.userInfo;return tt({},e,{userInfo:{username:n.username,phone:n.phone,id:n.id},isLogin:a.isLogin})})),Object(o.a)(Qe,"USER_GET_ORDERS",(function(e,t){return tt({},e,{orders:t.payload})})),Object(o.a)(Qe,"USER_ADD_ADDRESS",(function(e,t){return tt({},e,{address:t.payload})})),Object(o.a)(Qe,"USER_GET_ADDRESS",(function(e,t){return tt({},e,{address:t.payload})})),Object(o.a)(Qe,"USER_SELECT_ADDRESS",(function(e,t){return tt({},e,{selectAddress:t.payload})})),Object(o.a)(Qe,"USER_CHANGE_AVATAR",(function(e,t){return tt({},e,{avatar:t.payload})})),Qe),{userInfo:{},isLogin:!1,address:[],orders:[],selectAddress:"",avatar:""});function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rt(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var st=Object(Ze.a)((at={},Object(o.a)(at,"SHOP_GETDATA",(function(e,t){return ct({},e,{shopData:t.payload})})),Object(o.a)(at,"SHOP_CARTLIST",(function(e,t){return ct({},e,{cartList:t.payload})})),at),{shopData:{},cartList:[]}),ot=Object(Xe.c)({user:nt,shop:st}),lt=a(60),it=[a.n(lt).a],ut=Object(Xe.d)(ot,Xe.a.apply(void 0,it));s.a.render(r.a.createElement(x.a,null,r.a.createElement(m.a,{store:ut},r.a.createElement(Ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,a){e.exports=a(110)},66:function(e,t,a){},72:function(e,t,a){},98:function(e,t,a){},99:function(e,t){!function(e){var t='<svg><symbol id="icon-loading" viewBox="0 0 1024 1024"><path d="M960 447.008q-11.008-152.992-120-261.504t-260.992-120.512q-16-0.992-27.488 9.504t-11.488 26.496q0 14.016 9.504 24.512t23.488 11.488q55.008 4 107.008 26.016 60.992 26.016 108.992 73.504t74.016 109.504q22.016 51.008 26.016 106.016 0.992 14.016 11.488 23.488t24.512 9.504q15.008 0 26.016-11.008 11.008-12 8.992-27.008z"  ></path></symbol><symbol id="icon-check-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m193.5 301.7l-210.6 292c-12.7 17.7-39 17.7-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"  ></path></symbol><symbol id="icon-close-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m165.4 618.2l-66-0.3L512 563.4l-99.3 118.4-66.1 0.3c-4.4 0-8-3.5-8-8 0-1.9 0.7-3.7 1.9-5.2l130.1-155L340.5 359c-1.2-1.5-1.9-3.3-1.9-5.2 0-4.4 3.6-8 8-8l66.1 0.3L512 464.6l99.3-118.4 66-0.3c4.4 0 8 3.5 8 8 0 1.9-0.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"  ></path></symbol><symbol id="icon-info-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol><symbol id="icon-warning-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296z m32 440c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol></svg>',a=function(){var e=document.getElementsByTagName("script");return e[e.length-1]}().getAttribute("data-injectcss"),n=function(e,t){t.firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(e,t.firstChild):t.appendChild(e)};if(a&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(r){console&&console.log(r)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()}),!1)}else document.attachEvent&&function(e,t){var a=e.document,n=!1,c=function(){n||(n=!0,t())};(function e(){try{a.documentElement.doScroll("left")}catch(r){return void setTimeout(e,50)}c()})(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,c())}}(e,t)}((function(){var e,a;(e=document.createElement("div")).innerHTML=t,t=null,(a=e.getElementsByTagName("svg")[0])&&(a.setAttribute("aria-hidden","true"),a.style.position="absolute",a.style.width=0,a.style.height=0,a.style.overflow="hidden",n(a,document.body))}))}(window)}},[[61,1,2]]]);
//# sourceMappingURL=main.8d284898.chunk.js.map