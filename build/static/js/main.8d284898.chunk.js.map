{"version":3,"sources":["components/modal/icons.js","util/storage.js","api/index.js","components/Stars.js","components/BottomTabBar.js","pages/Foods.js","components/toast/notice.js","components/toast/notification.js","components/toast/toast.js","components/toast/index.js","store/actions/userActions.js","store/action_types.js","store/actions/shopActions.js","store/actions/index.js","pages/User.js","util/formatDate.js","pages/Order.js","pages/searchComponents/HotSearch.js","pages/Search.js","pages/shopComponents/ShopTabBar.js","util/isCart.js","pages/shopComponents/ShopCommend.js","pages/shopComponents/ShopFoodList.js","pages/shopComponents/ShopComment.js","pages/shopComponents/ShopInfo.js","pages/shopComponents/BottomCart.js","pages/Shop.js","components/modal/dialog/alert.js","components/modal/dialog/confirm.js","components/modal/dialog/prompt.js","components/modal/modal.js","components/modal/index.js","pages/OrderConfirmation.js","pages/OrderDetail.js","pages/UserRegister.js","pages/UserLogin.js","pages/MyAddress.js","pages/AddressAdd.js","pages/AddressSelect.js","pages/userInfo/userInfo.js","pages/avatarUpload/AvatarUpload.js","routes.js","App.js","serviceWorker.js","store/reducer/userReducer.js","store/reducer/shopReducer.js","store/reducer/index.js","store/index.js","index.js","components/toast/icons.js"],"names":["window","svgSprite","shouldInjectCss","scripts","document","getElementsByTagName","length","getAttribute","prepend","el","target","firstChild","parentNode","insertBefore","before","appendChild","__iconfont__svg__cssinject__","write","e","console","log","fn","addEventListener","indexOf","readyState","setTimeout","loadFn","removeEventListener","attachEvent","w","d","done","init","polling","documentElement","doScroll","onreadystatechange","IEContentLoaded","ready","div","svg","createElement","innerHTML","setAttribute","style","position","width","height","overflow","body","getStorage","key","value","localStorage","getItem","JSON","parse","setStorage","val","stringify","setItem","getShopDetail","id","axios","get","validateToken","requestGetOrders","reqAddAddress","data","post","reqGetAddress","uploadAvatar","headers","getAvatar","defaults","baseURL","interceptors","request","use","config","Authorization","error","Promise","reject","Stars","props","stars","rate","FloorRate","Math","floor","decRate","emptyRate","fullStar","halfStar","emptyStar","i","push","className","color","BottomTabBar","exact","to","isActive","match","location","pathname","activeClassName","Food","state","storeList","currentAddr","this","userInfo","res","address","setState","isLogin","history","from","onClick","handleAddress","bind","map","store","_id","src","store_logo_url","store_name","store_grade","startup_cost","distribution_cost","Component","connect","user","Notice","type","content","aria-hidden","xlinkHref","info","success","warning","loading","Notification","transitionTime","notices","removeNotice","Date","getTime","notice","getNoticeKey","every","item","duration","filter","onClose","classNames","timeout","createNotification","notification","ref","React","createRef","ReactDOM","render","addNotice","current","destroy","unmountComponentAtNode","removeChild","notificationDOM","Toast","createActions","payload","a","username","password","opts","status","errorCode","message","token","avatar","orders","addressLocal","replace","userId","CurrentAddress","userLogin","userValidate","userGetOrders","userAddAddress","userGetAddress","userSelectAddress","userChangeAvatar","getShopData","createAction","setCartList","cartList","shop","User","updateAvatar","phone","historyToInfo","alt","handleClickRegister","handleClickLogin","withRouter","dispatch","ownProps","url","actions","paddZero","num","formatDate","date","y","getFullYear","m","getMonth","getDate","h","getHours","mi","getMinutes","s","getSeconds","Order","getOrders","orderList","order","index","storeId","storeLogoUrl","storeName","formateDate","time","foods","name","price","handleClickReOrder","HotSearch","useState","historySearchList","setHistorySearchList","useEffect","searchList","aria-label","role","Search","go","handleClickGoBack","placeholder","ShopTabBar","tabList","currentIndex","setCurrentIndex","tab","isCart","foods_commend","shopData","handleAddToCart","handleReduceCart","food","food_pic","food_name","food_sales","food_price","food_id","data-id","data-name","data-price","data-pic","updataCartList","currentMenuIndex","setCurrentMenuIndex","scroller","useRef","store_categories","handleChangeMenu","currentTarget","parseInt","scrollerEl","scrollerChildren","children","lastTopValue","targetTop","offsetTop","timer","setInterval","scrollTop","clearInterval","pic","flag","cloneCartList","findIndex","splice","ShopCommend","cat","data-index","cat_name","food_ingredient","ShopInfo","href","isEmpty","allPrice","forEach","parseFloat","toFixed","Shop","params","setShopData","backgroundImage","clickGoback","Alert","contentText","onOk","Confirm","onCancel","Prompt","handleChange","enterContent","event","onChange","DialogTypes","Modal","showDialog","confirm","removeDialog","Error","in","renderDialogForType","popupDialog","alert","prompt","updateCart","getAddress","setOrder","setAddress","orderLocal","o","dispatchCost","sendData","UserRegister","usernameRef","passwordRef","phoneRef","nameExp","phoneExp","passExp","test","htmlFor","setFrom","fromLocation","addressList","goBack","addDre","linkRef","addressRef","detailRef","linkVal","phoneVal","addVal","deVal","setCurrentAddress","selectAddress","path","component","Foods","UserLogin","AddressAdd","AddressSelect","MyAddress","auth","UserInfo","file","preImg","isSelected","setSelect","fl","files","FormData","append","ava","img","URL","createObjectURL","onload","revokeObjectURL","click","display","borderRadius","accept","OrderConfirmation","OrderDetail","validate","routrEachValidateToken","listen","action","routes","route","Boolean","hostname","reducer","handleActions","combineReducers","middleWare","reduxPromiseMiddleWare","createStore","applyMiddleware","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.8d284898.chunk.js","sourcesContent":["/* eslint-disable */\n(function(window){var svgSprite='<svg><symbol id=\"icon-check-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m193.5 301.7l-210.6 292c-12.7 17.7-39 17.7-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z\"  ></path></symbol><symbol id=\"icon-close-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m165.4 618.2l-66-0.3L512 563.4l-99.3 118.4-66.1 0.3c-4.4 0-8-3.5-8-8 0-1.9 0.7-3.7 1.9-5.2l130.1-155L340.5 359c-1.2-1.5-1.9-3.3-1.9-5.2 0-4.4 3.6-8 8-8l66.1 0.3L512 464.6l99.3-118.4 66-0.3c4.4 0 8 3.5 8 8 0 1.9-0.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z\"  ></path></symbol></svg>';var script=function(){var scripts=document.getElementsByTagName(\"script\");return scripts[scripts.length-1]}();var shouldInjectCss=script.getAttribute(\"data-injectcss\");var ready=function(fn){if(document.addEventListener){if(~[\"complete\",\"loaded\",\"interactive\"].indexOf(document.readyState)){setTimeout(fn,0)}else{var loadFn=function(){document.removeEventListener(\"DOMContentLoaded\",loadFn,false);fn()};document.addEventListener(\"DOMContentLoaded\",loadFn,false)}}else if(document.attachEvent){IEContentLoaded(window,fn)}function IEContentLoaded(w,fn){var d=w.document,done=false,init=function(){if(!done){done=true;fn()}};var polling=function(){try{d.documentElement.doScroll(\"left\")}catch(e){setTimeout(polling,50);return}init()};polling();d.onreadystatechange=function(){if(d.readyState==\"complete\"){d.onreadystatechange=null;init()}}}};var before=function(el,target){target.parentNode.insertBefore(el,target)};var prepend=function(el,target){if(target.firstChild){before(el,target.firstChild)}else{target.appendChild(el)}};function appendSvg(){var div,svg;div=document.createElement(\"div\");div.innerHTML=svgSprite;svgSprite=null;svg=div.getElementsByTagName(\"svg\")[0];if(svg){svg.setAttribute(\"aria-hidden\",\"true\");svg.style.position=\"absolute\";svg.style.width=0;svg.style.height=0;svg.style.overflow=\"hidden\";prepend(svg,document.body)}}if(shouldInjectCss&&!window.__iconfont__svg__cssinject__){window.__iconfont__svg__cssinject__=true;try{document.write(\"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>\")}catch(e){console&&console.log(e)}}ready(appendSvg)})(window)\n/* eslint-enable */","export function getStorage(key) {\r\n  let value = window.localStorage.getItem(key);\r\n  return JSON.parse(value);\r\n}\r\n\r\nexport function setStorage(key, val) {\r\n  val = JSON.stringify(val); \r\n  window.localStorage.setItem(key, val);\r\n}","import axios from 'axios';\r\nimport { getStorage } from '../util/storage';\r\n\r\naxios.defaults.baseURL = 'http://127.0.0.1:8080/api/public/v1';\r\n\r\naxios.interceptors.request.use(config => {\r\n  // 请求头添加token\r\n  config.headers.Authorization = `${getStorage('token')}`;\r\n  return config;\r\n}, error => {\r\n  return Promise.reject(error);\r\n});\r\n\r\n// 获取店铺列表\r\nexport function getStoreList() {\r\n  return axios.get('/stores');\r\n}\r\n\r\n// 通过店铺Id 获取详细信息->food \r\nexport function getShopDetail(id) {\r\n  return axios.get(`/store/detail/${id}`);\r\n}\r\n\r\n// 注册\r\nexport function userRegister(opts) {\r\n  return axios.post('/user/register', {\r\n    data: {\r\n      ...opts\r\n    }\r\n  })\r\n}\r\n\r\n// 登录\r\nexport function requestUserLogin(opts) {\r\n  return axios.post('/user/login', {\r\n    data: {\r\n      ...opts\r\n    }\r\n  })\r\n}\r\n\r\n// token校验\r\nexport function validateToken() {\r\n  return axios.get('/validate/token')\r\n}\r\n\r\n// 支付成功，生成订单\r\nexport function generateOrder(data) {\r\n  return axios.post('/order', {\r\n    data\r\n  })\r\n}\r\n\r\n// 获取订单\r\nexport function requestGetOrders(id) {\r\n  return axios.get(`/order/${id}`)\r\n}\r\n\r\n//添加收货地址\r\nexport function reqAddAddress(data) {\r\n  return axios.post('/address/add', {\r\n    data\r\n  })\r\n}\r\n\r\n//获取收货地址\r\nexport function reqGetAddress(id) {\r\n  return axios.get(`/address/${id}`);\r\n}\r\n\r\n// 用户更改头像\r\nexport function uploadAvatar({ data, id }) {\r\n  return axios.post(`/user/avatar/?id=${id}`, data, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    },\r\n  })\r\n}\r\n\r\n// 获取用户头像\r\nexport function getAvatar(id) {\r\n  return axios.get(`/user/avatar/${id}`);\r\n}","import React from 'react';\r\n\r\nexport default function Stars (props) {\r\n\r\n  let { rate } = props;\r\n\r\n  let FloorRate = Math.floor(rate),\r\n      decRate = rate - FloorRate,\r\n      emptyRate = Math.floor(5 - rate),\r\n      fullStar = [],\r\n      halfStar = [],\r\n      emptyStar = [],\r\n      stars = [];\r\n\r\n  for (let i = 0; i < FloorRate; i++) {\r\n    fullStar.push((<i className='iconfont icon-pingfen' style={{color: '#FFCB00'}} key={'' + i + FloorRate}></i>))\r\n  }\r\n  \r\n  decRate > 0.5 && halfStar.push((<i className='iconfont icon-xing' style={{color: '#FFCB00'}} key={'' + decRate}></i>))\r\n\r\n  for (let i = 0; i < emptyRate; i++) {\r\n    emptyStar.push((<i className='iconfont icon-pingfen' style={{color: '#eee'}} key={i}></i>));\r\n  }\r\n\r\n  stars = [...fullStar, ...halfStar, ...emptyStar];\r\n  return (\r\n    <div className='star_wrapper'>\r\n      {stars}\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst BottomTabBar = (props) => {\r\n  return (\r\n    <nav className='tab_bar_container'>\r\n      <NavLink exact to=\"/\" className='tab_item' isActive = {(match, location) => (location.pathname === '/')} activeClassName=\"selected\">\r\n        <i className='iconfont icon-fan'></i>\r\n        <span>首页</span>\r\n      </NavLink>\r\n      <NavLink to=\"/order\" className='tab_item' isActive = {(match, location) => (location.pathname === '/order')} activeClassName=\"selected\">\r\n        <i className='iconfont icon-icon-'></i>\r\n        <span>订单</span>\r\n      </NavLink>\r\n      <NavLink to=\"/user\" className='tab_item' isActive = {(match, location) => (location.pathname === '/user')} activeClassName=\"selected\">\r\n        <i className='iconfont icon-wode'></i>\r\n        <span>我的</span>\r\n      </NavLink>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default BottomTabBar;","import React, { Component } from 'react';\r\nimport { getStoreList } from '../api/index';\r\nimport { Link } from 'react-router-dom';\r\nimport Stars from '../components/Stars';\r\nimport  BottomTabBar from '../components/BottomTabBar';\r\nimport { connect } from 'react-redux';\r\nimport { getStorage } from '../util/storage'\r\n\r\nclass Food extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      storeList: [],\r\n      currentAddr: ''\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { userInfo: { id } } = this.props;\r\n    let res = await getStoreList();\r\n    let address = getStorage('address');\r\n\r\n    let currentAddr = '';\r\n\r\n    if (address[id]) {\r\n      currentAddr = address[id].address;\r\n    }\r\n\r\n    this.setState({\r\n      storeList: res.data.data,\r\n      currentAddr\r\n    })\r\n  }\r\n\r\n  handleAddress() {\r\n    let { isLogin, history, location } = this.props;\r\n    if (!isLogin) {\r\n      return history.push({\r\n        pathname: '/user/login',\r\n        state: { from: location.pathname }\r\n      })\r\n    } else {\r\n      return history.push({\r\n        pathname: '/user/address/select',\r\n        state: { from: location.pathname }\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { storeList } = this.state;\r\n    return ( \r\n      <div className='home_container'>\r\n        <header className='home_header'>\r\n          <div className='header_address' onClick={this.handleAddress.bind(this)}>\r\n            <i className='iconfont icon-zuobiao'></i>\r\n            <span className='address_name'>{ this.state.currentAddr || '添加地址' }</span>\r\n            <i className='icon_trig'></i>\r\n          </div>\r\n          <Link to='/search' className=\"search_input\">\r\n            <div className='ipt'><i className='iconfont icon-sousuo'></i><span>搜索附近商家、商品名称</span></div>\r\n          </Link>\r\n        </header>\r\n        <section className='recommended_merchants'>\r\n          <span className='split'>——</span>\r\n          <span className='title'>推荐商家</span>\r\n          <span className='split'>——</span>\r\n        </section>\r\n        <section className='merchants'>\r\n          <ul className='merchant_list'>\r\n            {\r\n              storeList.map(store => (\r\n                <li className='merchant_item' key={store._id}>\r\n                  <Link to={`/shop/${store._id}`} className='merchant_detail'>\r\n                    <div className='left_logo'>\r\n                      <img src={store.store_logo_url} />\r\n                    </div>\r\n                    <div className='text_detail'>\r\n                      <div className='name'>\r\n                        <h2>{store.store_name}</h2>\r\n                        <span>...</span>\r\n                      </div>\r\n                      <div className='rate_num'>\r\n                        <div className='stars'>\r\n                          <Stars rate={store.store_grade} />\r\n                          <span>{store.store_grade}</span>\r\n                        </div>\r\n                        <p>商家配送</p>\r\n                      </div>\r\n                      <div className='dispatch'>\r\n                        <div><span>￥{store.startup_cost}起送</span><span className='split'>|</span><span>{store.distribution_cost ? `配送费￥${store.distribution_cost}` : '免配送费'}</span></div>\r\n                        <div><span>718m</span><span className='split'>|</span>30分钟<span></span></div>\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                  <div className='coupon_detail'></div>\r\n                </li>\r\n              ))\r\n            }\r\n          </ul>\r\n        </section>\r\n        <BottomTabBar />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default connect(state => ({ ...state.user }))(Food);","import React, { Component } from 'react'\n\nclass Notice extends Component {\n    render() {\n        const icons = {\n            info: 'icon-info-circle-fill',\n            success: 'icon-check-circle-fill',\n            warning: 'icon-warning-circle-fill',\n            error: 'icon-close-circle-fill',\n            loading: 'icon-loading'\n        }\n        const { type, content } = this.props\n        return (\n            <div className={`toast-notice ${type}`}>\n                <svg className=\"icon\" aria-hidden=\"true\">\n                    <use xlinkHref={`#${icons[type]}`} />\n                </svg>\n                <span>{content}</span>\n            </div>\n        )\n    }\n}\n\nexport default Notice","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\nimport { CSSTransition, TransitionGroup } from 'react-transition-group'\nimport Notice from './notice'\n\nclass Notification extends Component {\n    constructor() {\n        super()\n        this.transitionTime = 300\n        this.state = { notices: [] }\n        this.removeNotice = this.removeNotice.bind(this)\n    }\n\n    getNoticeKey() {\n        const { notices } = this.state\n        return `notice-${new Date().getTime()}-${notices.length}`\n    }\n\n    addNotice(notice) {\n        const { notices } = this.state\n        notice.key = this.getNoticeKey()\n        if (notices.every(item => item.key !== notice.key)) {\n            if (notice.length > 0 && notices[notice.length - 1].type === 'loading') {\n                notices.push(notice)\n                setTimeout(() => { this.setState({ notices }) }, this.transitionTime)\n            } else {\n                notices.push(notice)\n                this.setState({ notices })\n            }\n            if (notice.duration > 0) {\n                setTimeout(() => {\n                    this.removeNotice(notice.key)\n                }, notice.duration)\n            }\n        }\n        return () => { this.removeNotice(notice.key) }\n    }\n\n    removeNotice(key) {\n        const { notices } = this.state\n        this.setState({\n            notices: notices.filter((notice) => {\n                if (notice.key === key) {\n                    if (notice.onClose) setTimeout(notice.onClose, this.transitionTime)\n                    return false\n                }\n                return true\n            })\n        })\n    }\n\n    render() {\n        const { notices } = this.state\n        return (\n            <TransitionGroup className=\"toast-notification\">\n                {\n                    notices.map(notice => (\n                        <CSSTransition\n                            key={notice.key}\n                            classNames=\"toast-notice-wrapper notice\"\n                            timeout={this.transitionTime}\n                        >\n                            <Notice {...notice} />\n                        </CSSTransition>\n                    ))\n                }\n            </TransitionGroup>\n        )\n    }\n}\n\nfunction createNotification() {\n    const div = document.createElement('div')\n    document.body.appendChild(div)\n    const ref = React.createRef()\n    ReactDOM.render(<Notification ref={ref} />, div)\n    return {\n        addNotice(notice) {\n            return ref.current.addNotice(notice)\n        },\n        destroy() {\n            ReactDOM.unmountComponentAtNode(div)\n            document.body.removeChild(div)\n        }\n    }\n}\n\nexport default createNotification()","import notificationDOM from './notification'\nimport './toast.css'\n\nlet notification\nconst notice = (type, content, duration = 2000, onClose) => {\n    if (!notification) notification = notificationDOM\n    return notification.addNotice({ type, content, duration, onClose })\n}\n\nexport default {\n    info(content, duration, onClose) {\n        return notice('info', content, duration, onClose)\n    },\n    success(content, duration, onClose) {\n        return notice('success', content, duration, onClose)\n    },\n    warning(content, duration, onClose) {\n        return notice('warning', content, duration, onClose)\n    },\n    error(content, duration, onClose) {\n        return notice('error', content, duration, onClose)\n    },\n    loading(content, duration = 0, onClose) {\n        return notice('loading', content, duration, onClose)\n    }\n}","import Toast from './toast'\nimport './icons'\n\nexport default Toast","import * as TYPES from '../action_types';\r\nimport { createActions } from 'redux-actions';\r\nimport { requestUserLogin, requestGetOrders, reqAddAddress, reqGetAddress } from '../../api';\r\nimport Toast from '../../components/toast';\r\nimport { setStorage, getStorage } from '../../util/storage';\r\n\r\nconst { userLogin, userValidate, userGetOrders, userAddAddress, userGetAddress, userSelectAddress, userChangeAvatar } = createActions({\r\n  [TYPES.USER_LOGIN]: async payload => {\r\n    let { username, password, history, from } = payload;\r\n    let res = await requestUserLogin({\r\n        username,\r\n        password\r\n      });\r\n      // 登录成功\r\n    if (res.status === 200 && res.data.errorCode === 0) {\r\n      let data = res.data;\r\n      Toast.success(data.message);\r\n      // 更新token\r\n      setStorage('token', data.token);\r\n      history.push(from);\r\n      // userInfo、avatar信息存放在redux中\r\n      return {\r\n        userInfo: data.userInfo,\r\n        avatar: data.avatar\r\n      };\r\n    } else {\r\n      Toast.success(res.data.message);\r\n      return {};\r\n    }\r\n  },\r\n  [TYPES.USER_VALIDATE]: res => {\r\n    // token校验成功, 更新token,并保存基本信息\r\n    if (res.data.errorCode === 0) {\r\n      setStorage('token', res.data.token);\r\n      return {\r\n        userInfo: res.data.userInfo,\r\n        isLogin: true\r\n      };\r\n    } else {// token失效, 清除基本信息\r\n      return {\r\n        userInfo: {},\r\n        isLogin: false\r\n      };\r\n    }\r\n  },\r\n  [TYPES.USER_GET_ORDERS]: async id => {\r\n    let res = await requestGetOrders(id);\r\n    if (res.status === 200 && res.data.errorCode === 0) {\r\n      return res.data.orders;\r\n    } else {\r\n      return [];\r\n    }\r\n  },\r\n  [TYPES.USER_ADD_ADDRESS]: async data => {\r\n    let { id, address, history, from } = data;\r\n    let res = await reqAddAddress({id, address});\r\n\r\n    let addressLocal = getStorage('address') || {};\r\n    addressLocal[id] = address;\r\n\r\n    if (res.status === 200 && res.data.errorCode === 0) {\r\n      history.replace(from);\r\n      Toast.success('添加成功...');\r\n      setStorage('address', addressLocal);\r\n      return res.data.address;\r\n    }\r\n    return [];\r\n  },\r\n  [TYPES.USER_GET_ADDRESS]: async id => {\r\n    let res = await reqGetAddress(id);\r\n\r\n    if (res.status === 200 && res.data.errorCode === 0) {\r\n      return res.data.address\r\n    }\r\n    return [];\r\n  },\r\n  [TYPES.USER_SELECT_ADDRESS]: val => {\r\n    let { userId, CurrentAddress } = val;\r\n    let address = getStorage('address') || {};\r\n    address[userId] = CurrentAddress;\r\n    setStorage('address', address);\r\n    return val;\r\n  },\r\n  [TYPES.USER_CHANGE_AVATAR]: payload => {\r\n    return payload;\r\n  }\r\n});\r\n\r\nexport default {\r\n  userLogin,\r\n  userValidate,\r\n  userGetOrders,\r\n  userAddAddress,\r\n  userGetAddress,\r\n  userSelectAddress,\r\n  userChangeAvatar\r\n}","export const SHOP_GETDATA = 'SHOP_GETDATA';\r\nexport const SHOP_CARTLIST = 'SHOP_CARTLIST';\r\nexport const USER_LOGIN = 'USER_LOGIN';\r\nexport const USER_VALIDATE_IS_LOGIN = 'USER_VALIDATE_IS_LOGIN';\r\nexport const USER_VALIDATE = 'USER_VALIDATE';\r\nexport const USER_GET_ORDERS = 'USER_GET_ORDERS';\r\nexport const USER_ADD_ADDRESS = 'USER_ADD_ADDRESS';\r\nexport const USER_GET_ADDRESS = 'USER_GET_ADDRESS';\r\nexport const USER_SELECT_ADDRESS = 'USER_SELECT_ADDRESS';\r\nexport const USER_CHANGE_AVATAR = 'USER_CHANGE_AVATAR';","import * as TYPES from '../action_types';\r\nimport { createAction } from 'redux-actions';\r\nimport { getShopDetail } from '../../api/index';\r\nimport { getStorage, setStorage }  from '../../util/storage';\r\n\r\nconst getShopData = createAction(TYPES.SHOP_GETDATA, async id => {\r\n  let res = await getShopDetail(id);\r\n  return res.data.data;\r\n});\r\n\r\nconst setCartList = createAction(TYPES.SHOP_CARTLIST, payload => {\r\n  let cartList = getStorage('cartList') || {};\r\n  setStorage('cartList', {\r\n    ...cartList,\r\n    [payload.id]: payload.cartList\r\n  });\r\n  return payload.cartList;\r\n});\r\n\r\nexport default {\r\n  getShopData,\r\n  setCartList\r\n}","import user from './userActions';\r\nimport shop from './shopActions'\r\n\r\nexport default {\r\n  user,\r\n  shop\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BottomTabBar from '../components/BottomTabBar';\r\nimport { getAvatar } from '../api';\r\nimport actions from '../store/actions';\r\n\r\nclass User extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  handleClickRegister() {\r\n    this.props.history.push('/user/register');\r\n  }\r\n\r\n  handleClickLogin() {\r\n    this.props.history.push({\r\n      pathname: '/user/login',\r\n      state: {\r\n        from: '/user'\r\n      }\r\n    });\r\n  }\r\n\r\n  historyToInfo() {\r\n    this.props.history.push('/user/info');\r\n  }\r\n\r\n  componentDidMount() {\r\n    let { userInfo: { id }, updateAvatar } = this.props;\r\n    (async () => {\r\n      if (id) {\r\n        let res = await getAvatar(id);\r\n        updateAvatar(res.data.avatar);\r\n      }\r\n    })()\r\n  }\r\n\r\n  render() {\r\n    let { userInfo: { username, phone }, avatar } = this.props;\r\n\r\n    return (\r\n      <div className='user_container'>\r\n        {\r\n          username ? (\r\n            <header className='user_detail' onClick={this.historyToInfo.bind(this)}>\r\n              <div className='profile'>\r\n                <div className='avatar'><img src={avatar || \"https://cube.elemecdn.com/0/d0/dd7c960f08cdc756b1d3ad54978fdjpeg.jpeg?x-oss-process=image/format,webp/resize,w_90,h_90,m_fixed\"} alt=\"\" /></div>\r\n                <div className='profile_text'><span>{username}</span><span>{phone}</span></div>\r\n              </div>\r\n              <span className='split'>></span>\r\n            </header>\r\n          ) : (\r\n              <header className='user_login'>\r\n                <button className='register btn' onClick={this.handleClickRegister.bind(this)}>注册</button>\r\n                <button className='login btn' onClick={this.handleClickLogin.bind(this)}>登陆</button>\r\n              </header>\r\n            )\r\n        }\r\n        {\r\n          /*\r\n            <section className='coupon'>\r\n          <div className='red_packets con'>\r\n            <p><span>3</span>个</p>\r\n            <span>红包</span>\r\n          </div>\r\n          <div className='integral con'>\r\n            <p><span>3</span>个</p>\r\n            <span>积分</span>\r\n          </div>\r\n        </section>\r\n          */\r\n        }\r\n        <section className='address_b'>\r\n          <div className='icon'><i className='iconfont icon-dizhi'></i></div>\r\n          <Link className='address' to='/user/address'>\r\n            <span>我的地址</span>\r\n            <span>></span>\r\n          </Link>\r\n        </section>\r\n        <section className='help_container'>\r\n          <div className='help'>\r\n            <div className='help-i'><i className='iconfont icon-kefu'></i></div>\r\n            <div className='help-t'>\r\n              <span>我的客服</span>\r\n              <span>></span>\r\n            </div>\r\n          </div>\r\n          <div className='help'>\r\n            <div className='help-i'><i className='iconfont icon-app'></i></div>\r\n            <div className='help-t'>\r\n              <span>下载APP</span>\r\n              <span>></span>\r\n            </div>\r\n          </div>\r\n          <div className='help'>\r\n            <div className='help-i'><i className='iconfont icon-guize'></i></div>\r\n            <div className='help-t gua'>\r\n              <span>规则中心</span>\r\n              <span>></span>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <BottomTabBar />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    updateAvatar: (url) => {\r\n      dispatch(actions.user.userChangeAvatar(url));\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(state => ({ ...state.user }), mapDispatchToProps)(User));","function paddZero(num) {\r\n  return num = num < 10 ? '0' + num : num;\r\n}\r\n\r\nexport default function formatDate(date) {\r\n  date = date && new Date(date) || new Date();\r\n  let y = date.getFullYear(),\r\n      m = date.getMonth() + 1,\r\n      d = date.getDate(),\r\n      h = date.getHours(),\r\n      mi = date.getMinutes(),\r\n      s = date.getSeconds();\r\n    \r\n  m = paddZero(m);\r\n  d = paddZero(d);\r\n  h = paddZero(h);\r\n  mi = paddZero(mi);\r\n  s = paddZero(s);\r\n\r\n  return `${y}-${m}-${d} ${h}:${mi}:${s}`;\r\n}","import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport BottomTabBar from '../components/BottomTabBar';\r\nimport { connect } from 'react-redux';\r\nimport formateDate from '../util/formatDate';\r\nimport actions from '../store/actions';\r\n\r\nclass Order extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  handleClickReOrder(id) {\r\n    this.props.history.push(`/shop/${id}`);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    let { userInfo: { id }, getOrders} = this.props;\r\n    // 获取列表\r\n    getOrders(id);\r\n  }\r\n\r\n  render() {\r\n    let { orderList } = this.props;\r\n\r\n    return (\r\n      <div className='order_container'>\r\n        <div className='title'>订单</div>\r\n        <div className='order_list'>\r\n          {\r\n            orderList.map((order, index) => {\r\n              return (\r\n                <div className='order_item' key={index}>\r\n                  <Link className='order_avatar' to={`/shop/${order.storeId}`}><img src={order.storeLogoUrl}  alt='logo'/></Link>\r\n                  <div className=\"order_detail\">\r\n                    <div className=\"trade_name\">\r\n                      <div className='trade'>\r\n                        <Link className='name' to={`/shop/${order.storeId}`}>{order.storeName}</Link>\r\n                        <div className=\"spilt\">></div>\r\n                        <div className='arrive'>已送达</div>\r\n                      </div>\r\n                      <div className=\"order_time\">{formateDate(order.time)}</div>\r\n                    </div>\r\n                    <Link className=\"foods_detail\" to={`/order_detail/${index}`}>\r\n                      <div className='name'><div className='n'>{order.foods[0].name}</div><div className='num'>等{ order.foods.length }件商品</div></div>\r\n                      <div className='price'>￥{order.price}</div>\r\n                    </Link>\r\n                    <div className=\"order_operate\">\r\n                      <button onClick={this.handleClickReOrder.bind(this, order.storeId)}>再来一单</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n        <BottomTabBar />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getOrders: id => {\r\n      dispatch(actions.user.userGetOrders(id))\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(connect( state => ({ orderList: state.user.orders, userInfo: state.user.userInfo }), mapDispatchToProps)(Order));","import React, { useCallback, useState, useEffect } from 'react';\r\n\r\nexport default function HotSearch(props) {\r\n\r\n  let [historySearchList, setHistorySearchList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let searchList = window.localStorage.getItem('historySearchList');\r\n    console.log(searchList);\r\n    searchList = searchList && window.JSON.parse(searchList) || [];\r\n    setHistorySearchList(searchList);\r\n  }, [])\r\n\r\n  function handleClickClear() {\r\n    window.localStorage.setItem('historySearchList', '');\r\n    setHistorySearchList([]);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {\r\n        !historySearchList.length ? '' : (\r\n          <section className='history_search_wrapper'>\r\n            <header className='search_title'>\r\n              <span>历史搜索</span>\r\n              <div aria-label='清楚历史搜索' role='button' onClick={handleClickClear}><i className='iconfont icon-lajitong'></i></div>\r\n            </header>\r\n            <section className='search_content'>\r\n            {\r\n              historySearchList.map((item, index) => {\r\n                return (\r\n                  <button className='search_item' key={index}>{item}</button>\r\n                )\r\n              })\r\n            }\r\n            </section>\r\n          </section>\r\n        ) \r\n      }\r\n      <section className='hot_search_wrapper'>\r\n        <header className='search_title'>热门搜索</header>\r\n        <section className='search_content'>\r\n          <button className='search_item'>过桥米线</button>\r\n          <button className='search_item'>奶茶</button>\r\n          <button className='search_item'>原创</button>\r\n          <button className='search_item'>黄焖鸡</button>\r\n          <button className='search_item'>煲仔饭</button>\r\n        </section>\r\n      </section>\r\n    </>\r\n  )\r\n}","import React, { Component } from 'react';\r\nimport HotSearch from './searchComponents/HotSearch';\r\n\r\nexport default class Search extends Component {\r\n\r\n  handleClickGoBack() {\r\n    window.history.go(-1);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='search_container'>\r\n        <section className='header-search'>\r\n          <div className=\"goback\" onClick={this.handleClickGoBack}><i className='iconfont icon-you-copy'></i></div>\r\n          <form className=\"search_input\">\r\n            <i className='iconfont icon-sousuo'></i>\r\n            <input type=\"search\" placeholder='输入商家、商品名称' />\r\n            <button className='btn'>搜索</button>\r\n          </form>\r\n        </section>\r\n        <HotSearch />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nexport default function ShopTabBar(props) {\r\n  let [tabList] = useState(['点餐', '评价', '商家']);\r\n\r\n  let { currentIndex, setCurrentIndex } = props;\r\n\r\n  return (\r\n    <nav className='shop_tabbar'>\r\n      {\r\n        tabList.map((tab, index) => (\r\n          <div className='tabbar_item' key={index + ''} onClick={() => setCurrentIndex(index)}>{tab}<span className={currentIndex === index ? 'active' : ''}></span></div>\r\n        ))\r\n      }\r\n    </nav>\r\n  )\r\n}","// 判断该商品是否在购物车里\r\n\r\nexport default function isCart(cartList, id) {\r\n  let cartDetail = cartList.filter(item => {\r\n    return item.id == id;\r\n  })[0];\r\n  return cartDetail;\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport isCart from '../../util/isCart';\r\n\r\nfunction Shopcommend(props) {\r\n  const { shopData: {foods_commend}, cartList, handleAddToCart, handleReduceCart } = props;\r\n\r\n  return (\r\n    <div className='merchant_recommendation'>\r\n      <h2>商家推荐</h2>\r\n      <div className='recommend'>\r\n        <div className='recommend_wrapper'>\r\n          {\r\n            foods_commend && foods_commend.map(food => {\r\n              return (\r\n                <div className='recommend_item' key={food['_id']}>\r\n                  <img src={food.food_pic || 'http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg'} alt=\"\" />\r\n                  <div className='food_detail'>\r\n                    <p className='food_name'>{food.food_name}</p>\r\n                    <p className='food_data'>月售{food.food_sales} 好评率100%</p>\r\n                    <div className='food_card'>\r\n                      <span>￥{food.food_price}</span>\r\n                      <span className='operate'>\r\n                        {\r\n                          !isCart(cartList, food.food_id) ? '' : (\r\n                            <>\r\n                              <a data-id={food.food_id} onClick={handleReduceCart}><i className='iconfont icon-jian'></i></a>\r\n                              <span>{isCart(cartList, food.food_id).num}</span>\r\n                            </>\r\n                          )\r\n                        }\r\n                        <a data-name={food.food_name} data-id={food.food_id} data-price={food.food_price} data-pic={food.food_pic || 'http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg'}  onClick={handleAddToCart}><i className='iconfont icon-add'></i></a>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(store => ({ ...store.shop }))(Shopcommend)","import React, { useState, useRef } from 'react';\r\nimport ShopCommend from \"./ShopCommend\";\r\nimport { connect } from 'react-redux';\r\nimport isCart from '../../util/isCart';\r\nimport actions from '../../store/actions';\r\n\r\nfunction ShopFoodList(props) {\r\n  // 当前菜单所在位置\r\n  let [currentMenuIndex, setCurrentMenuIndex] = useState(0);\r\n  let scroller = useRef(null);\r\n  const { shopData: { foods_commend, store_categories }, cartList, storeId } = props;\r\n\r\n  function handleChangeMenu(e) {\r\n    let index = e.currentTarget.getAttribute('data-index');\r\n    if (currentMenuIndex == index) return;\r\n    setCurrentMenuIndex(parseInt(index));\r\n\r\n    const scrollerEl = scroller.current;\r\n    const scrollerChildren = scroller.current.children;\r\n\r\n    if (!scrollerChildren[index]) { // 不存在直接退出\r\n      return;\r\n    }\r\n\r\n    let targetTop = scrollerChildren[index].offsetTop;\r\n    let lastTopValue;\r\n\r\n    let timer = window.setInterval(() => {\r\n      if ( scrollerEl.scrollTop > targetTop) {\r\n        if (scrollerEl.scrollTop <= targetTop || lastTopValue === scrollerEl.scrollTop) {\r\n          scrollerEl.scrollTop = targetTop;\r\n          clearInterval(timer);\r\n        }\r\n        lastTopValue = scrollerEl.scrollTop;\r\n        scrollerEl.scrollTop -= 3;\r\n      } else {\r\n        if (scrollerEl.scrollTop >= targetTop || lastTopValue === scrollerEl.scrollTop) {\r\n          scrollerEl.scrollTop = targetTop;\r\n          clearInterval(timer);\r\n        }\r\n        lastTopValue = scrollerEl.scrollTop;\r\n        scrollerEl.scrollTop += 3;\r\n      }\r\n    }, 3);\r\n  }\r\n\r\n  function handleAddToCart(e) {\r\n    let name = e.currentTarget.getAttribute('data-name');\r\n    let id = e.currentTarget.getAttribute('data-id');\r\n    let price = e.currentTarget.getAttribute('data-price');\r\n    let pic = e.currentTarget.getAttribute('data-pic');\r\n\r\n    let flag = false;\r\n\r\n    let cloneCartList = JSON.parse(JSON.stringify(cartList));\r\n\r\n    cloneCartList = cloneCartList.map(item => {\r\n      if (item.id === id) {\r\n        flag = true; // 已经在购物车中, 数量加1\r\n        item.num = item.num + 1;\r\n        return item;\r\n      }\r\n      return item;\r\n    })\r\n\r\n    !flag && cloneCartList.push({ // 加入购物车\r\n      name,\r\n      id,\r\n      price,\r\n      pic,\r\n      num: 1\r\n    });\r\n\r\n    // 更新购物车数据\r\n    props.updataCartList({\r\n      id: storeId,\r\n      cartList: cloneCartList\r\n    });\r\n  }\r\n\r\n  function handleReduceCart(e) {\r\n    let id = e.currentTarget.getAttribute('data-id');\r\n\r\n    let cloneCartList = JSON.parse(JSON.stringify(cartList));\r\n\r\n    let index = cloneCartList.findIndex(item => item.id === id);\r\n\r\n    let num = cloneCartList[index].num;\r\n\r\n    if (num === 1) {\r\n      cloneCartList.splice(index, 1);\r\n    } else {\r\n      cloneCartList[index].num -= 1\r\n    }\r\n\r\n    // 更新购物车数据\r\n    props.updataCartList({\r\n      id: storeId,\r\n      cartList: cloneCartList\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {foods_commend && !foods_commend['length'] ? '' : <ShopCommend handleAddToCart={handleAddToCart} handleReduceCart={handleReduceCart} />}\r\n      <div className=\"menuview_wrapper\">\r\n        <main className=\"menuview_main\">\r\n          <div className=\"left_menu\">\r\n            <ul className=\"menu_category\">\r\n              {\r\n                store_categories && store_categories.map((cat, i) => {\r\n                  return (\r\n                    !cat.children.length ? '' :\r\n                    (<li className={i === currentMenuIndex ? 'menu_item active' : 'menu_item'} data-index={i} onClick={handleChangeMenu} key={i}>{cat.cat_name}</li>)\r\n                  )\r\n                })\r\n              }\r\n            </ul>\r\n          </div>\r\n          <div className=\"right_content\">\r\n            <div ref={scroller} className=\"scroller\">\r\n              {\r\n                store_categories && store_categories.map((cat, i) => {\r\n                  return (\r\n                    !cat.children.length ? '' :\r\n                    <dl key={i}>\r\n                      <dt>\r\n                        <div className='food_title'>\r\n                          <strong>{cat.cat_name}</strong>\r\n                          {\r\n                            i === 0 ? (<span>大家喜欢吃，才叫真好吃。</span>) : ''\r\n                          }\r\n                        </div>\r\n                      </dt>\r\n                      {\r\n                        cat.children.map((item, index) => {\r\n                          return (\r\n                            <dd key={index}>\r\n                              <div className='food_detail_wrapper'>\r\n                                <span className='food_pic'>\r\n                                  <img src={item.food_pic || 'http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg'} alt=\"\" />\r\n                                </span>\r\n                                <section className='food'>\r\n                                  <div className=\"food_detail\">\r\n                                    <p className=\"food_name\">{item.food_name}</p>\r\n                                    <p className=\"food_desc\">{item.food_ingredient}</p>\r\n                                    <p className=\"food_sales\">\r\n                                      <span>月售{item.food_sales}份</span>\r\n                                      <span>好评率100%</span>\r\n                                    </p>\r\n                                  </div>\r\n                                  <div className=\"food_card\">\r\n                                    <span>￥{item.food_price}</span>\r\n                                    <span className=\"operate\">\r\n                                      {\r\n                                        !isCart(cartList, item.food_id) ? '' : (\r\n                                          <>\r\n                                            <a data-id={item.food_id} onClick={handleReduceCart}>\r\n                                              <i className=\"iconfont icon-jian\"></i>\r\n                                            </a>\r\n                                            <span>{isCart(cartList, item.food_id).num}</span>\r\n                                          </>\r\n                                        )\r\n                                      }\r\n                                      <a data-name={item.food_name} data-id={item.food_id} data-pic={item.food_pic || 'http://pic.51yuansu.com/pic3/cover/01/55/70/594c83ce7e5b3_610.jpg'} data-price={item.food_price} onClick={handleAddToCart}>\r\n                                        <i className=\"iconfont icon-add\"></i>\r\n                                      </a>\r\n                                    </span>\r\n                                  </div>\r\n                                </section>\r\n                              </div>\r\n                            </dd>\r\n                          )\r\n                        })\r\n                      }\r\n                    </dl>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    updataCartList: (cartList) => {\r\n      dispatch(actions.shop.setCartList(cartList));\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(store => ({ ...store.shop }), mapDispatchToProps)(ShopFoodList);","import React from 'react';\r\nimport Stars from '../../components/Stars';\r\nimport { connect } from 'react-redux';\r\n\r\nfunction ShopComment(props) {\r\n  console.log('====================================');\r\n  console.log(props);\r\n  console.log('====================================');\r\n\r\n  return (\r\n    <div className='shop_comment_container'>\r\n      <section className='shop_rate'>\r\n        <div className='rate'>\r\n          <p>4.6</p>\r\n          <div className='rate_icon'>\r\n            <span>商家评分</span>\r\n            <Stars rate={4.6} />\r\n          </div>\r\n        </div>\r\n        <div className='taste_score'>\r\n          <div className='taste'>\r\n            <span>味道</span>\r\n            <span>4.6</span>\r\n          </div>\r\n          <div className='taste'>\r\n            <span>包装</span>\r\n            <span>4.6</span>\r\n          </div>\r\n        </div>\r\n        <div className='dispatch_rate'>\r\n          <span>配送</span>\r\n          <span>5.0</span>\r\n        </div>\r\n      </section>\r\n      <section className='comment_wrapper'>\r\n        \r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(store => ({...store.shop}))(ShopComment);","import React from 'react';\r\n\r\nexport default function ShopInfo() {\r\n\r\n  return (\r\n    <div className='shop_info_wrapper'>\r\n      <section className='dispatch_info'>\r\n        <h3>配送信息</h3>\r\n        <p>约30分钟送达，距离593m</p>\r\n        <p>配送费￥0</p>\r\n      </section>\r\n      <section className='merchant_service'>\r\n        <h3>商家服务</h3>\r\n        <p>该商户食品安全已由国泰产险承担，食品安全有保障</p>\r\n      </section>\r\n      <section className='merchant_info'>\r\n        <h3>商家信息</h3>\r\n        <ul>\r\n          <li>本店优先配送饿了么　速度更快价格更爽　这么奋斗的你不就是为吃顿好的么　在品味美食的路上寻找爱　你只需轻轻按下手机　放松心情　躺在床上　听听音乐　美食就在路上　一份外卖满满的都是爱</li>\r\n          <li>\r\n            <span>品类</span>\r\n            <span>其他菜系,盖浇饭</span>\r\n          </li>\r\n          <li>\r\n            <span>商家电话</span>\r\n            <a href=\"tel:10086\">\r\n              <i className='iconfont icon-dianhua'></i>\r\n              <span>商家电话</span>\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <span>地址</span>\r\n            <span>九江市共青城市金纺路西侧乘风花园39号</span>\r\n          </li>\r\n          <li>\r\n            <span>营业时间</span>\r\n            <span>09:00-14:00,16:30-21:00</span>\r\n          </li>\r\n        </ul>\r\n      </section>\r\n      <section className='qualifal'>\r\n        <h3>营业资质</h3>\r\n      </section>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport Toast  from '../../components/toast';\r\n\r\nfunction BottomCart(props) {\r\n\r\n  const { cartList, isLogin, history, location } = props;\r\n\r\n  let isEmpty = !cartList.length;\r\n  let allPrice = 0;\r\n  \r\n  cartList.forEach(item => {\r\n    allPrice += parseFloat(item.price) * item.num;\r\n  })\r\n  // 总金额保留两位小数\r\n  allPrice = allPrice.toFixed(2);\r\n\r\n  function handleClickPay() {\r\n    if (isLogin) {//已经登陆，跳转到订单页\r\n      history.push('/order_confim');\r\n    } else {// 未登陆，跳转到登录页\r\n      history.push({\r\n        pathname: '/user/login',\r\n        state: { from: location.pathname }\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='bottom_cart_container'>\r\n      {\r\n        isEmpty ? (<>\r\n          <span className='cart_icon'><i className='iconfont icon-icon_cart'></i></span>\r\n          <div className='cart_setail'>未选购商品</div>\r\n          <div className='pay'>￥0起送</div>\r\n        </>) : (<>\r\n            <span className='cart_icon active'><i className='iconfont icon-icon_cart active'></i></span>\r\n            <div className='cart_setail'>\r\n              <p className='all_price'>￥{allPrice}</p>\r\n            </div>\r\n            <div className='pay active' onClick={handleClickPay}>去结算</div>\r\n        </>)\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(store => ({ cartList: store.shop.cartList, isLogin: store.user.isLogin }))(BottomCart);","import React, { Component } from \"react\";\r\nimport ShopTabBar from \"./shopComponents/ShopTabBar\";\r\nimport ShopFoodList from './shopComponents/ShopFoodList';\r\nimport ShopComment from \"./shopComponents/ShopComment\";\r\nimport ShopInfo from \"./shopComponents/ShopInfo\";\r\nimport BottomCart from './shopComponents/BottomCart';\r\nimport { connect } from 'react-redux';\r\nimport actions from '../store/actions';\r\nimport { getStorage } from '../util/storage';\r\n\r\nclass Shop extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentIndex: 0\r\n    };\r\n  }\r\n\r\n  // 点餐、评价、商家的Tab切换索引\r\n  setCurrentIndex(index) {\r\n    this.setState({\r\n      currentIndex: index\r\n    });\r\n  }\r\n\r\n  // 点击回退\r\n  clickGoback() {\r\n    this.props.history.go(-1);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 获取数据\r\n    let { id } = this.props.match.params;\r\n    this.props.setShopData(id);\r\n    let cart = getStorage('cartList') || {};\r\n    let cartList = cart[id] || [];\r\n    this.props.setCartList({\r\n      id,\r\n      cartList\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { currentIndex } = this.state;\r\n    let { shopData, history, location } = this.props;\r\n    let { id } = this.props.match.params;\r\n    \r\n    return (\r\n      <div className=\"goods_container\">\r\n        <div className=\"store_detail\">\r\n          <nav className=\"nav_goback\" style={{backgroundImage: `url(${shopData['store_pic']})`}}>\r\n            <a className=\"goback\" onClick={this.clickGoback.bind(this)}>\r\n              <i className=\"iconfont icon-you-copy\"></i>\r\n            </a>\r\n          </nav>\r\n          <div className=\"content\">\r\n            <div className=\"store_logo\">\r\n              <img\r\n                src={shopData['store_logo_url']}\r\n                alt=\"logo\"\r\n              />\r\n            </div>\r\n            <div className=\"store_name\">\r\n              <h2>{shopData['store_name']}</h2>\r\n            </div>\r\n            <div className=\"store_data\">\r\n              <span>评价{shopData['store_grade']}</span>\r\n              <span>月售{shopData['store_sales']}单</span>\r\n              <span>约30分钟</span>\r\n            </div>\r\n            <div className=\"store_notice\">\r\n              <span>\r\n                公告: {shopData['store_notice']}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"shop_tab\">\r\n          <ShopTabBar\r\n            currentIndex={currentIndex}\r\n            setCurrentIndex={this.setCurrentIndex.bind(this)}\r\n          />\r\n        </div>\r\n        <div className='main_content'>\r\n          {\r\n            currentIndex === 0 ? <ShopFoodList storeId={id} /> : (currentIndex === 1 ? <ShopComment /> : <ShopInfo />) \r\n          }\r\n        </div>\r\n        <BottomCart history={history} location={location}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setShopData: id => {\r\n      dispatch(actions.shop.getShopData(id));\r\n    },\r\n    setCartList: opts => {\r\n      dispatch(actions.shop.setCartList(opts))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(store => ({ ...store.shop }), mapDispatchToProps)(Shop);","import React, { Component } from 'react'\n\nclass Alert extends Component {\n    render() {\n        const { contentText, onOk } = this.props\n        return (\n            <div className=\"modal-alert dialog\">\n                <h4>{contentText}</h4>\n                <button type=\"button\" onClick={() => { if (onOk) onOk() }}>\n                    <svg className=\"icon\" aria-hidden=\"true\">\n                        <use xlinkHref=\"#icon-check-circle-fill\" />\n                    </svg>\n                </button>\n            </div>\n        )\n    }\n}\n\nexport default Alert","import React, { Component } from 'react'\n\nclass Confirm extends Component {\n    render() {\n        const { contentText, onOk, onCancel } = this.props\n        return (\n            <div className=\"modal-confirm dialog\">\n                <h4>{contentText}</h4>\n                <div className=\"button-wrapper\">\n                    <button type=\"button\" className=\"check\" onClick={() => { if (onOk) onOk() }}>\n                        <svg className=\"icon\" aria-hidden=\"true\">\n                            <use xlinkHref=\"#icon-check-circle-fill\" />\n                        </svg>\n                    </button>\n                    <button type=\"button\" className=\"close\" onClick={() => { if (onCancel) onCancel() }}>\n                        <svg className=\"icon\" aria-hidden=\"true\">\n                            <use xlinkHref=\"#icon-close-circle-fill\" />\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Confirm","import React, { Component } from 'react'\n\nclass Prompt extends Component {\n    constructor() {\n        super()\n        this.handleChange = this.handleChange.bind(this)\n        this.state = { enterContent: '' }\n    }\n\n    handleChange(event) {\n        this.setState({ enterContent: event.target.value })\n    }\n\n    render() {\n        const { contentText, onOk, onCancel } = this.props\n        const { enterContent } = this.state\n        return (\n            <div className=\"modal-prompt dialog\">\n                <h4>{contentText}</h4>\n                <input type=\"text\" value={enterContent} onChange={this.handleChange} />\n                <div className=\"button-wrapper\">\n                    <button type=\"button\" className=\"check\" onClick={() => { if (onOk) onOk(enterContent) }}>\n                        <svg className=\"icon\" aria-hidden=\"true\">\n                            <use xlinkHref=\"#icon-check-circle-fill\" />\n                        </svg>\n                    </button>\n                    <button type=\"button\" className=\"close\" onClick={() => { if (onCancel) onCancel() }}>\n                        <svg className=\"icon\" aria-hidden=\"true\">\n                            <use xlinkHref=\"#icon-close-circle-fill\" />\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Prompt","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\nimport { CSSTransition } from 'react-transition-group'\nimport Alert from './dialog/alert'\nimport Confirm from './dialog/confirm'\nimport Prompt from './dialog/prompt'\n\nconst DialogTypes = {\n    ALERT: 'alert',\n    CONFIRM: 'confirm',\n    PROMPT: 'prompt'\n}\n\nclass Modal extends Component {\n    constructor() {\n        super()\n        this.onClose = this.onClose.bind(this)\n        this.transitionTime = 300\n        this.state = { showDialog: false }\n    }\n\n    componentDidMount() {\n        this.setState({ showDialog: true })\n    }\n\n    onClose(confirm, data) {\n        const { onOk, onCancel, removeDialog } = this.props\n        if (confirm && onOk) onOk(data)\n        else if (onCancel) onCancel()\n        setTimeout(removeDialog, this.transitionTime)\n        this.setState({ showDialog: false })\n    }\n\n    renderDialogForType(type, props) {\n        switch (type) {\n            case DialogTypes.ALERT:\n                return <Alert {...props} />\n            case DialogTypes.CONFIRM:\n                return <Confirm {...props} />\n            case DialogTypes.PROMPT:\n                return <Prompt {...props} />\n            default:\n                throw new Error('dialog type error')\n        }\n    }\n\n    render() {\n        const { type, contentText } = this.props\n        const { onClose } = this\n        const { showDialog } = this.state\n        return (\n            <CSSTransition\n                in={showDialog}\n                classNames=\"modal-wrapper\"\n                timeout={this.transitionTime}\n            >\n                <div className=\"modal\">\n                    <CSSTransition\n                        in={showDialog}\n                        classNames=\"dialog-wrapper\"\n                        timeout={this.transitionTime}\n                    >\n                        {\n                            this.renderDialogForType(type, {\n                                contentText,\n                                onOk(data) { onClose(true, data) },\n                                onCancel() { onClose(false) },\n                            })\n                        }\n                    </CSSTransition>\n                </div>\n            </CSSTransition>\n        )\n    }\n}\n\nfunction popupDialog(params) {\n    const div = document.createElement('div')\n    document.body.appendChild(div)\n    ReactDOM.render(<Modal\n        {...params}\n        removeDialog={() => {\n            ReactDOM.unmountComponentAtNode(div)\n            document.body.removeChild(div)\n        }}\n    />, div)\n}\n\nexport default {\n    alert(params) {\n        popupDialog({ type: DialogTypes.ALERT, ...params })\n    },\n    confirm(params) {\n        popupDialog({ type: DialogTypes.CONFIRM, ...params })\n    },\n    prompt(params) {\n        popupDialog({ type: DialogTypes.PROMPT, ...params })\n    }\n}","import Modal from './modal'\nimport './icons'\nimport './index.css'\n\nexport default Modal","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getStorage, setStorage } from \"../util/storage\";\r\nimport Toast from '../components/toast';\r\nimport Modal from '../components/modal';\r\nimport { generateOrder } from '../api';\r\nimport actions from '../store/actions';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction OrderConfirmation(props) {\r\n  let { shopData, cartList, userInfo, updateCart, getAddress } = props;\r\n\r\n  let [order, setOrder] = useState({});\r\n  let [address, setAddress] = useState({});\r\n\r\n  useEffect(() => {\r\n    let orderLocal = getStorage('order');\r\n    let addressLocal = getStorage('address') || {};\r\n\r\n    if (addressLocal[userInfo.id] && addressLocal[userInfo.id].name) {\r\n      setAddress(addressLocal[userInfo.id]);\r\n      getAddress(addressLocal[userInfo.id]);\r\n    }\r\n\r\n    if (orderLocal && orderLocal.storeName) {\r\n      setOrder({\r\n        ...orderLocal\r\n      });\r\n    } else {\r\n      let allPrice = 0;\r\n      cartList.forEach(food => {\r\n        allPrice += parseFloat(food.price) * food.num;\r\n      });\r\n      allPrice += shopData.distribution_cost;\r\n\r\n      let o = {\r\n        storeName: shopData.store_name,\r\n        dispatchCost: shopData.distribution_cost,\r\n        cartList,\r\n        allPrice\r\n      }\r\n\r\n      setOrder(o);\r\n      setStorage('order', o);\r\n    }\r\n  }, []);\r\n\r\n  function handleGoBack() {\r\n    props.history.go(-1);\r\n\r\n    //退出订单页面, 清楚本地存储\r\n    setStorage('order', {});\r\n  }\r\n\r\n  function handleClickPay() {\r\n    Modal.confirm({\r\n      contentText: '确认支付',\r\n      async onOk() {\r\n        let sendData = {\r\n          userId: userInfo.id,\r\n          storeId: shopData._id,\r\n          storeName: shopData.store_name,\r\n          storeLogoUrl: shopData.store_logo_url,\r\n          foods: cartList,\r\n          price: order.allPrice,\r\n          address\r\n        }\r\n        // 生成新的订单\r\n        let res = await generateOrder(sendData);\r\n\r\n        if (res.status === 200 && res.data.errorCode === 0) {\r\n          Toast.success('支付成功');\r\n          //清空购物车\r\n          updateCart({ id: shopData._id, cartList: [] });\r\n          //退出订单页面, 清楚本地存储\r\n          setStorage('order', {});\r\n\r\n          props.history.push('/order');\r\n        } else {\r\n          Toast.error('服务器正忙...');\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"order_confim_container\">\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>确认订单</h1>\r\n      </header>\r\n      <section className=\"address\">\r\n        {\r\n          address.name ? (\r\n            <>\r\n              <p>订单配送至</p>\r\n              <Link to='/user/address/select'>\r\n                <p>\r\n                  <span>{address.address}</span>\r\n                  <span>></span>\r\n                </p>\r\n                <div className=\"user_detail\">\r\n                  <span>{address.name}</span>\r\n                  <span>{address.phone}</span>\r\n                </div>\r\n              </Link>\r\n            </>\r\n          ) : (\r\n              <Link to='/user/address/select' className='address_select'>选择地址</Link>\r\n            )\r\n        }\r\n      </section>\r\n      <section className=\"cart_group\">\r\n        <h3 className=\"cart_storename\">{order.storeName}</h3>\r\n        <ul className=\"foods\">\r\n          {order.cartList && order.cartList.map((food, i) => {\r\n            return (\r\n              <li className=\"cart_item\" key={i}>\r\n                <div className=\"logo\">\r\n                  <img src={food.pic} alt=\"logo\" />\r\n                </div>\r\n                <span className=\"name\">{food.name}</span>\r\n                <span className=\"num\">x {food.num}</span>\r\n                <span className=\"price\">￥{food.price}</span>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n        <div className=\"dispatch_cost other\">\r\n          <span>配送费</span>\r\n          <span>￥{order.dispatchCost}</span>\r\n        </div>\r\n        {/** \r\n           * \r\n           * <div className='other'>\r\n              <span>红包</span>\r\n              <span>-4</span>\r\n              </div>\r\n          */}\r\n        <div className=\"price other\">\r\n          <span>优惠说明</span>\r\n          <span>\r\n            小计 ￥<span className=\"all_price\">{order.allPrice}</span>\r\n          </span>\r\n        </div>\r\n        <footer className=\"pay_bar\">\r\n          <span>￥{order.allPrice}</span>\r\n          <div className=\"pay\" onClick={handleClickPay}>去支付</div>\r\n        </footer>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    updateCart: (opts) => {\r\n      dispatch(actions.shop.setCartList({\r\n        ...opts\r\n      }))\r\n    },\r\n    getAddress: val => {\r\n      dispatch(actions.user.userSelectAddress(val))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(store => ({ ...store.shop, userInfo: store.user.userInfo }), mapDispatchToProps)(OrderConfirmation);\r\n","import React, {useState, useEffect} from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport formateDate from '../util/formatDate';\r\n\r\nfunction OrderDetail(props) {\r\n  let [order, setOrder] = useState({});\r\n  let { orderList, match } = props;\r\n\r\n  useEffect(() => {\r\n    let o = orderList[match.params.index]\r\n    setOrder(o)\r\n  }, []);\r\n\r\n  function handleGoBack () {\r\n    props.history.go(-1);\r\n  }\r\n\r\n  return (\r\n    <div className=\"order_detail_container\">\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>订单详情</h1>\r\n      </header>\r\n      <section className=\"order_group\">\r\n        <div className=\"title\">订单信息</div>\r\n        <ul>\r\n          <li className='order_item'>订单号：{ order.num }</li>\r\n          <li className='order_item'>支付方式: 在线支付</li>\r\n          <li className='order_item'>下单时间: {formateDate(order.time)}</li>\r\n        </ul>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(state => ({orderList: state.user.orders}))(OrderDetail);\r\n","import React, {useRef} from 'react';\r\nimport Toast from '../components/toast';\r\nimport { userRegister } from '../api';\r\n\r\nfunction UserRegister(props) {\r\n\r\n  let usernameRef = useRef(null);\r\n  let passwordRef = useRef(null);\r\n  let phoneRef = useRef(null);\r\n\r\n  function handleGoBack() {\r\n    props.history.go(-1);\r\n  }\r\n\r\n  async function handleClickRegister() {\r\n    let username = usernameRef.current.value,\r\n        phone = phoneRef.current.value,\r\n        password = passwordRef.current.value,\r\n        nameExp = /^\\S{2,16}$/,\r\n        phoneExp = /^(?:(?:\\+|00)86)?1[3-9]\\d{9}$/,\r\n        passExp = /^\\S{6,16}$/;\r\n\r\n    if (username === '' || phone === '' || password === '') {\r\n      return Toast.error('手机号、用户名、密码不能为空');\r\n    } else if (!nameExp.test(username)) {\r\n      return Toast.error('用户名不合法');\r\n    } else if (!phoneExp.test(phone)) {\r\n      return Toast.error('手机号不合法')\r\n    } else if (!passExp.test(password)) {\r\n      return Toast.error('密码长度为6-16');\r\n    }\r\n\r\n    let res = await userRegister({\r\n      username,\r\n      phone,\r\n      password\r\n    });\r\n\r\n    if (res.status === 200 && res.data.errorCode === 0) {\r\n      props.history.push('/user/login');\r\n    } \r\n    return Toast.success(res.data.message+', 请登录', 5000);\r\n  }\r\n\r\n  return (\r\n    <div className='register_wrapper'>\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>用户注册</h1>\r\n      </header>\r\n      <section className='form_group'>\r\n        <div className='form'>\r\n          <label htmlFor=\"phone\">\r\n            手&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;机:\r\n            <input type=\"text\" name='phone' id='phone' ref={phoneRef}/>\r\n          </label>\r\n          <label htmlFor=\"username\">\r\n            用&nbsp;户&nbsp;名: \r\n            <input id='username' name='username' type=\"text\" ref={usernameRef}/>\r\n          </label>\r\n          <label htmlFor=\"password\">\r\n            密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码:\r\n            <input type=\"password\" name=\"password\" id=\"password\" ref={passwordRef}/>\r\n          </label>\r\n          <button className='btn' onClick={handleClickRegister}>注册</button>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserRegister;","import React, {useRef, useEffect, useState} from 'react';\r\nimport Toast from '../components/toast';\r\nimport actions from '../store/actions/userActions';\r\nimport { connect } from 'react-redux';\r\n\r\nfunction UserLogin(props) {\r\n  let { isLogin, history, location, userLogin } = props;\r\n\r\n  let usernameRef = useRef(null);\r\n  let passwordRef = useRef(null);\r\n  let [from, setFrom] = useState('');\r\n\r\n  useEffect(() => {\r\n    let fromLocation = location.state && location.state.from;\r\n    if ((fromLocation === '/order' || fromLocation === '/user/address') && isLogin) {\r\n      history.push(fromLocation);\r\n    } else if(isLogin) {\r\n      history.push('/');\r\n    } else if (/(\\/shop)/.test(fromLocation) && !isLogin) {\r\n      Toast.error('还未登陆, 请登陆...');\r\n      setFrom(fromLocation);\r\n    } else {\r\n      setFrom(fromLocation);\r\n    }\r\n  }, [isLogin])\r\n\r\n  function handleGoBack() {\r\n    history.go(-1);\r\n  }\r\n\r\n  async function handleClickLogin() {\r\n    let username = usernameRef.current.value,\r\n        password = passwordRef.current.value;\r\n\r\n    if (username === '' || password === '') {\r\n      return Toast.error('请输入账号密码');\r\n    }\r\n\r\n    userLogin({\r\n      username,\r\n      password,\r\n      history,\r\n      from\r\n    });\r\n  } \r\n  return (\r\n    <div className='login_wrapper'>\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>用户登陆</h1>\r\n      </header>\r\n      <section className='form_group'>\r\n        <div className='form'>\r\n            <input ref={usernameRef} id='username' name='username' type=\"text\" placeholder='请输入用户名或手机号'/>\r\n            <input ref={passwordRef} type=\"password\" name=\"password\" id=\"password\" placeholder='请输入密码'/>\r\n          <button className='btn' onClick={handleClickLogin}>登陆</button>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    userLogin: (opts) => {\r\n      dispatch(actions.userLogin({\r\n        ...opts\r\n      }))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(store => ({...store.user}), mapDispatchToProps)(UserLogin);","import React, {useEffect} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport actions from '../store/actions';\r\n\r\nfunction MyAddress(props) {\r\n  let { history, addressList, getAddress, userInfo } = props;\r\n  \r\n  function handleGoBack() {\r\n    history.goBack();\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAddress(userInfo.id);\r\n  }, []);\r\n\r\n  return (\r\n    <div className='myaddress_container'>\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>我的地址</h1>\r\n      </header>\r\n      <section className='address_group'>\r\n        {\r\n          addressList.map((item, i) => {\r\n            return (\r\n              <div className='address_item' key={i}>\r\n                <div className='address_detail'>\r\n                  <div className='receiver_info'>\r\n                    <span className='name'>{item.name}</span>\r\n                    <span className='phone'>{item.phone}</span>\r\n                  </div>\r\n                  <div className='address_info'>\r\n                    <span>{item.address}</span>\r\n                    <span>10栋</span>\r\n                  </div>\r\n                </div>\r\n                <div className='operate'>\r\n                  <span className='iconfont icon-xiugai'></span>\r\n                  <span className='iconfont icon-cha'></span>\r\n                </div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n      </section>\r\n      <Link className='footer' to={location => ({pathname: '/user/address/add', state: {from: location.pathname}})}>\r\n        <span className='iconfont icon-jia'></span>\r\n        <p>新增收货地址</p>\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getAddress: id => {\r\n      dispatch(actions.user.userGetAddress(id))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(state => ({ addressList: state.user.address, userInfo: state.user.userInfo }), mapDispatchToProps)(MyAddress);","import React, { useRef, useState, useEffect } from \"react\";\r\nimport Toast from '../components/toast';\r\nimport { connect } from 'react-redux';\r\nimport actions from '../store/actions';\r\n\r\nfunction AddressAdd(props) {\r\n  let { history, userInfo, addDre, location } = props;\r\n\r\n  let linkRef = useRef(null);\r\n  let phoneRef = useRef(null);\r\n  let addressRef = useRef(null);\r\n  let detailRef = useRef(null);\r\n\r\n  let [from, setFrom] = useState('');\r\n\r\n  useEffect(() => {\r\n    let fromLocation = location.state && location.state.from;\r\n\r\n    setFrom(fromLocation);\r\n  }, [])\r\n\r\n  function handleGoBack() {\r\n    history.goBack();\r\n  }\r\n\r\n  function handleConfirm() {\r\n    let linkVal = linkRef.current.value;\r\n    let phoneVal = phoneRef.current.value;\r\n    let addVal = addressRef.current.value;\r\n    let deVal = detailRef.current.value;\r\n\r\n    if (!linkVal || !phoneVal || !addVal || !deVal) {\r\n      return Toast.warning('不能为空, 必须填写...');\r\n    }\r\n\r\n    addDre({\r\n      id: userInfo.id,\r\n      address: {\r\n        name: linkVal,\r\n        phone: phoneVal,\r\n        address: addVal + deVal\r\n      },\r\n      history,\r\n      from\r\n    });\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"add_address\">\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>添加地址</h1>\r\n      </header>\r\n      <main className=\"content\">\r\n        <div className='form'>\r\n          <div className=\"linkman\">\r\n            <span>联系人</span>\r\n            <input ref={linkRef} type=\"text\" placeholder=\"姓名\" />\r\n          </div>\r\n          <div className=\"linkman\">\r\n            <span>电话</span>\r\n            <input ref={phoneRef} type=\"text\" placeholder=\"手机号码\" />\r\n          </div>\r\n          <div className=\"linkman\">\r\n            <span>地址</span>\r\n            <input ref={addressRef} type=\"text\" placeholder=\"小区/写字楼/学校\" />\r\n          </div>\r\n          <div className=\"linkman\">\r\n            <span>详细</span>\r\n            <input ref={detailRef} type=\"text\" placeholder=\"门牌号\" />\r\n          </div>\r\n        </div>\r\n        <div className='form_btn'>\r\n          <button className='btn' onClick={handleConfirm}>确定</button>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    addDre: data => {\r\n      dispatch(actions.user.userAddAddress(data))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(state => ({userInfo: state.user.userInfo}), mapDispatchToProps)(AddressAdd);\r\n","import React, {useEffect} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport actions from '../store/actions';\r\n\r\nfunction MyAddress(props) {\r\n  let { history, addressList, getAddress, userInfo, setCurrentAddress } = props;\r\n  \r\n  useEffect(() => {\r\n    getAddress(userInfo.id);\r\n  }, []);\r\n\r\n  function handleGoBack() {\r\n    history.goBack();\r\n  }\r\n\r\n  function selectAddress(e) {\r\n    let index = e.currentTarget.getAttribute('data-index');\r\n    setCurrentAddress({\r\n      CurrentAddress: addressList[index],\r\n      userId: userInfo.id\r\n    });\r\n    history.goBack();\r\n  }\r\n\r\n  return (\r\n    <div className='myaddress_container'>\r\n      <header className=\"confim_head\">\r\n        <span onClick={handleGoBack}>\r\n          <i className=\"iconfont icon-you-copy\"></i>\r\n        </span>\r\n        <h1>选择地址</h1>\r\n      </header>\r\n      <section className='address_group'>\r\n        {\r\n          addressList.map((item, i) => {\r\n            return (\r\n              <div className='address_item' key={i} data-index={i} onClick={selectAddress}>\r\n                <div className='address_detail'>\r\n                  <div className='receiver_info'>\r\n                    <span className='name'>{item.name}</span>\r\n                    <span className='phone'>{item.phone}</span>\r\n                  </div>\r\n                  <div className='address_info'>\r\n                    <span>{item.address}</span>\r\n                  </div>\r\n                </div>\r\n                <div className='operate'>\r\n                  <span className='iconfont icon-xiugai'></span>\r\n                  <span className='iconfont icon-cha'></span>\r\n                </div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n      </section>\r\n      <Link className='footer' to={location => ({pathname: '/user/address/add', state: {from: location.pathname}})}>\r\n        <span className='iconfont icon-jia'></span>\r\n        <p>新增收货地址</p>\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getAddress: id => {\r\n      dispatch(actions.user.userGetAddress(id))\r\n    },\r\n    setCurrentAddress: val => {\r\n      dispatch(actions.user.userSelectAddress(val));\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(state => ({ addressList: state.user.address, userInfo: state.user.userInfo }), mapDispatchToProps)(MyAddress);","import React, { useState } from 'react';\r\nimport './userInfo.less';\r\nimport { connect } from 'react-redux';\r\nimport { setStorage } from '../../util/storage';\r\nimport actions from '../../store/actions';\r\n\r\nfunction UserInfo(props) {\r\n  let { userInfo, validateToken, history, avatar } = props;\r\n\r\n  function handleQuit() {\r\n    setStorage('token', \"\");\r\n    validateToken({\r\n      data: {\r\n        errorCode: 1,\r\n        message: '登录实效, 请重新登陆...'\r\n      }\r\n    })\r\n    history.push({\r\n      pathname: '/user/login',\r\n      state: { from: '/user' }\r\n    })\r\n  }\r\n\r\n  function historyToAvatar() {\r\n    history.push('/user/avatar');\r\n  }\r\n\r\n  return (\r\n    <div className='user_info_contaienr'>\r\n      <div className='avatar item' onClick={ historyToAvatar }>\r\n        <b>头像</b>\r\n        <div className='avatar_img'>\r\n          <img src={ avatar || \"https://cube.elemecdn.com/0/d0/dd7c960f08cdc756b1d3ad54978fdjpeg.jpeg?x-oss-process=image/format,webp/resize,w_90,h_90,m_fixed\" } alt=\"\"/>\r\n          <span className='icon'>></span>\r\n        </div>\r\n      </div>\r\n      <div className='username item'>\r\n        <b>用户名</b>\r\n        <span>{ userInfo.username }</span>\r\n      </div>\r\n      <h2>账号绑定</h2>\r\n      <div className='phone item'>\r\n        <b>手机</b>\r\n        <span className='content'>\r\n          <span>{ userInfo.phone }</span>\r\n          <span className='icon'>></span>\r\n        </span>\r\n      </div>\r\n      <h2>安全设置</h2>\r\n      <div className='phone item'>\r\n        <b>登录密码</b>\r\n        <span className='content'>\r\n          <span className='change_text'>修改</span>\r\n          <span className='icon'>></span>\r\n        </span>\r\n      </div>\r\n      <button className='back_btn' onClick={ handleQuit }>退出登录</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    validateToken: (res) => {\r\n      dispatch(actions.user.userValidate(res));\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(state => ({ userInfo: state.user.userInfo, avatar: state.user.avatar }), mapDispatchToProps)(UserInfo);","import React, { useRef, useEffect, useState } from \"react\";\r\nimport \"./avatarUpload.less\";\r\nimport Toast from \"../../components/toast\";\r\nimport { uploadAvatar } from \"../../api\";\r\nimport { connect } from \"react-redux\";\r\nimport actions from '../../store/actions'\r\n\r\nfunction AvatarUpload(props) {\r\n  let { userInfo, history, updateAvatar } = props;\r\n  let file = useRef(null);\r\n  let preImg = useRef(null);\r\n\r\n  let [isSelected, setSelect] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const ava = file.current;\r\n    ava.addEventListener(\"change\", () => {\r\n      const fl = ava.files[0];\r\n      const img = preImg.current;\r\n      if (fl) {\r\n        let url = window.URL.createObjectURL(fl);\r\n        img.src = url;\r\n        img.onload = function() {\r\n          // 释放一个之前通过调用 URL.createObjectURL创建的 URL 对象\r\n          window.URL.revokeObjectURL(url);\r\n        };\r\n        setSelect(true);\r\n      } else {\r\n        setSelect(false);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  function handleClick() {\r\n    file.current.click();\r\n  }\r\n\r\n  function goBack() {\r\n    history.goBack();\r\n  }\r\n\r\n  async function confirmUpload() {\r\n    const fl = file.current.files[0];\r\n    if (!fl) {\r\n      Toast.error(\"请选择文件...\");\r\n    } else {\r\n      let data = new FormData();\r\n      data.append(\"avatar\", fl);\r\n\r\n      const res = await uploadAvatar({\r\n        id: userInfo.id,\r\n        data\r\n      });\r\n\r\n      if (res.data.errorCode === 0) {\r\n        Toast.success('修改成功...');\r\n        updateAvatar(res.data.avatar);\r\n        history.push('/user/info');\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"upload\">\r\n      <section className=\"head_bar\">\r\n        <span onClick={goBack}>返回</span>\r\n        <span onClick={confirmUpload}>确认</span>\r\n      </section>\r\n      <div className=\"up\">\r\n        <button type=\"button\" className=\"btn\" onClick={handleClick}>\r\n          {!isSelected ? <span>选择图片</span> : <span>重新选择</span>}\r\n          <img\r\n            ref={preImg}\r\n            src=\"\"\r\n            alt=\"\"\r\n            style={{ display: isSelected ? \"inline-block\" : \"none\", width: '100%', height: '100%', borderRadius: '100%' }}\r\n          />\r\n        </button>\r\n        <input\r\n          type=\"file\"\r\n          ref={file}\r\n          name=\"avatar\"\r\n          id=\"avatar\"\r\n          accept=\".jpg, .jpeg, .png\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    updateAvatar: (url) => {\r\n      dispatch(actions.user.userChangeAvatar(url));\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(state => ({ userInfo: state.user.userInfo }), mapDispatchToProps)(\r\n  AvatarUpload\r\n);\r\n","import Foods from './pages/Foods';\r\nimport User from './pages/User';\r\nimport Order from './pages/Order';\r\nimport Search from './pages/Search';\r\nimport Shop from './pages/Shop';\r\nimport OrderConfirmation from './pages/OrderConfirmation';\r\nimport OrderDetail from './pages/OrderDetail';\r\nimport UserRegister from './pages/UserRegister';\r\nimport UserLogin from './pages/UserLogin';\r\nimport MyAddress from './pages/MyAddress';\r\nimport AddressAdd from './pages/AddressAdd';\r\nimport AddressSelect from './pages/AddressSelect';\r\nimport UserInfo from './pages/userInfo/userInfo';\r\nimport AvatarUpload from './pages//avatarUpload/AvatarUpload';\r\n\r\nexport default [\r\n  { path: '/', name: 'Home', component: Foods },\r\n  { path: '/user/register', name: 'Refister', component: UserRegister },\r\n  { path: '/user/login', name: 'Login', component: UserLogin },\r\n  { path: '/user/address/add', name: 'AddressAdd', component: AddressAdd },\r\n  { path: '/user/address/select', name: 'AddressSelect', component: AddressSelect },\r\n  { path: '/user/address', name: 'MyAddress', component: MyAddress, auth: true },\r\n  { path: '/user/info', name: 'UserInfo', component: UserInfo, auth: true },\r\n  { path: '/user/avatar', name: 'Avatar', component: AvatarUpload, auth: true },\r\n  { path: '/user', name: 'User', component: User },\r\n  { path: '/order', name: 'Order', component: Order, auth: true },\r\n  { path: '/search', name: 'Search', component: Search },\r\n  { path: '/shop/:id', name: 'Shop', component: Shop },\r\n  { path: '/order_confim', name: 'OrderConfirm', component: OrderConfirmation, auth: true },\r\n  { path: '/order_detail/:index', name: 'OrderDetail', component: OrderDetail },\r\n]","import React, { useEffect, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport './App.less';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport routes from './routes';\nimport { validateToken } from './api';\nimport actions from './store/actions/userActions';\n\nfunction App(props) {\n  let { validate, isLogin, history } = props;\n  \n  useEffect(() => {\n    (async () => {\n      async function routrEachValidateToken() {\n        let res = await validateToken();\n        if (res.status === 200) {\n          validate(res);\n        }\n      }\n      await routrEachValidateToken();\n\n      let unlisten = history.listen(async (location, action) => {\n        // 路由拦截\n        if (location.pathname === '/user/avatar' && action === 'POP') {\n          history.push('/user');\n        }\n        await routrEachValidateToken();\n      });\n    })()\n  }, []);\n\n  // if (location.pathname === '/user/login' && isLogin) {\n  //   history.push('/order');\n  // }\n\n  return (\n    <Switch>\n      {\n        routes.map((route, index) => {\n          return (\n            <Route exact key={index} path={route.path} render={props => (\n              !route.auth\n                ? <route.component {...props} />\n                : (isLogin ? <route.component {...props} /> : <Redirect to={{\n                  pathname: '/user/login',\n                  state: { from: props.location.pathname }\n                }} />)\n            )} />\n          )\n        })\n      }\n    </Switch>\n  );\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    validate: (data) => {\n      dispatch(actions.userValidate(data))\n    }\n  }\n}\n\nexport default withRouter(connect(state => ({ ...state.user }), mapDispatchToProps)(App));\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { handleActions } from 'redux-actions';\r\nimport * as TYPES from '../action_types';\r\n\r\nlet initialState = {\r\n  userInfo: {},\r\n  isLogin: false,\r\n  address: [],\r\n  orders: [],\r\n  selectAddress: '',\r\n  avatar: ''\r\n}\r\n\r\nconst reducer = handleActions({\r\n  [TYPES.USER_LOGIN]: (state, action) => {\r\n    return {\r\n      ...state,\r\n      userInfo: action.payload.userInfo,\r\n      avatar: action.payload.avatar\r\n    }\r\n  },\r\n  [TYPES.USER_VALIDATE]: (state, action) => {\r\n    let { userInfo: { username, phone, id },  isLogin} = action.payload\r\n    return {\r\n      ...state,\r\n      userInfo: {\r\n        username,\r\n        phone,\r\n        id\r\n      },\r\n      isLogin\r\n    }\r\n  },\r\n  [TYPES.USER_GET_ORDERS]: (state, action) => ({\r\n    ...state,\r\n    orders: action.payload\r\n  }),\r\n  [TYPES.USER_ADD_ADDRESS]: (state, action) => ({\r\n    ...state,\r\n    address: action.payload\r\n  }),\r\n  [TYPES.USER_GET_ADDRESS]: (state, action) => ({\r\n    ...state,\r\n    address: action.payload\r\n  }),\r\n  [TYPES.USER_SELECT_ADDRESS]: (state, action) => ({\r\n    ...state,\r\n    selectAddress: action.payload\r\n  }),\r\n  [TYPES.USER_CHANGE_AVATAR]: (state, action) => ({\r\n    ...state,\r\n    avatar: action.payload\r\n  })\r\n}, initialState);\r\n\r\nexport default reducer;","import { handleActions } from 'redux-actions';\r\nimport * as TYPES from '../action_types';\r\n\r\nconst initialState = {\r\n  shopData: {},\r\n  cartList: []\r\n}\r\n\r\nconst reducer = handleActions({\r\n  [TYPES.SHOP_GETDATA]: (state, action) => ({\r\n    ...state,\r\n    shopData: action.payload\r\n  }),\r\n  [TYPES.SHOP_CARTLIST]: (state, action) => ({\r\n    ...state,\r\n    cartList: action.payload\r\n  })\r\n}, initialState);\r\n\r\nexport default reducer;","import { combineReducers } from 'redux';\r\nimport user from './userReducer';\r\nimport shop from './shopReducer';\r\n\r\nconst reducer = combineReducers({\r\n  user,\r\n  shop\r\n});\r\n\r\nexport default reducer;","import { createStore, applyMiddleware } from 'redux';\r\nimport reducer from './reducer';\r\nimport reduxPromiseMiddleWare from 'redux-promise';\r\n\r\nconst middleWare = [reduxPromiseMiddleWare];\r\n\r\nconst store = createStore(reducer, applyMiddleware(...middleWare));\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport { HashRouter as Router } from 'react-router-dom';\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>\n  , document.getElementById('root'));\nserviceWorker.unregister();\n","/* eslint-disable */\n(function(window){var svgSprite='<svg><symbol id=\"icon-loading\" viewBox=\"0 0 1024 1024\"><path d=\"M960 447.008q-11.008-152.992-120-261.504t-260.992-120.512q-16-0.992-27.488 9.504t-11.488 26.496q0 14.016 9.504 24.512t23.488 11.488q55.008 4 107.008 26.016 60.992 26.016 108.992 73.504t74.016 109.504q22.016 51.008 26.016 106.016 0.992 14.016 11.488 23.488t24.512 9.504q15.008 0 26.016-11.008 11.008-12 8.992-27.008z\"  ></path></symbol><symbol id=\"icon-check-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m193.5 301.7l-210.6 292c-12.7 17.7-39 17.7-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z\"  ></path></symbol><symbol id=\"icon-close-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m165.4 618.2l-66-0.3L512 563.4l-99.3 118.4-66.1 0.3c-4.4 0-8-3.5-8-8 0-1.9 0.7-3.7 1.9-5.2l130.1-155L340.5 359c-1.2-1.5-1.9-3.3-1.9-5.2 0-4.4 3.6-8 8-8l66.1 0.3L512 464.6l99.3-118.4 66-0.3c4.4 0 8 3.5 8 8 0 1.9-0.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z\"  ></path></symbol><symbol id=\"icon-info-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z\"  ></path></symbol><symbol id=\"icon-warning-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296z m32 440c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z\"  ></path></symbol></svg>';var script=function(){var scripts=document.getElementsByTagName(\"script\");return scripts[scripts.length-1]}();var shouldInjectCss=script.getAttribute(\"data-injectcss\");var ready=function(fn){if(document.addEventListener){if(~[\"complete\",\"loaded\",\"interactive\"].indexOf(document.readyState)){setTimeout(fn,0)}else{var loadFn=function(){document.removeEventListener(\"DOMContentLoaded\",loadFn,false);fn()};document.addEventListener(\"DOMContentLoaded\",loadFn,false)}}else if(document.attachEvent){IEContentLoaded(window,fn)}function IEContentLoaded(w,fn){var d=w.document,done=false,init=function(){if(!done){done=true;fn()}};var polling=function(){try{d.documentElement.doScroll(\"left\")}catch(e){setTimeout(polling,50);return}init()};polling();d.onreadystatechange=function(){if(d.readyState==\"complete\"){d.onreadystatechange=null;init()}}}};var before=function(el,target){target.parentNode.insertBefore(el,target)};var prepend=function(el,target){if(target.firstChild){before(el,target.firstChild)}else{target.appendChild(el)}};function appendSvg(){var div,svg;div=document.createElement(\"div\");div.innerHTML=svgSprite;svgSprite=null;svg=div.getElementsByTagName(\"svg\")[0];if(svg){svg.setAttribute(\"aria-hidden\",\"true\");svg.style.position=\"absolute\";svg.style.width=0;svg.style.height=0;svg.style.overflow=\"hidden\";prepend(svg,document.body)}}if(shouldInjectCss&&!window.__iconfont__svg__cssinject__){window.__iconfont__svg__cssinject__=true;try{document.write(\"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>\")}catch(e){console&&console.log(e)}}ready(appendSvg)})(window)\n/* eslint-enable */"],"sourceRoot":""}